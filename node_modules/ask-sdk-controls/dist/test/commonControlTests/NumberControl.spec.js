"use strict";
/*
 * Copyright 2020 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License').
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * or in the 'license' file accompanying this file. This file is distributed
 * on an 'AS IS' BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const chai_1 = require("chai");
const mocha_1 = require("mocha");
const NumberControl_1 = require("../../src/commonControls/NumberControl");
const Strings_1 = require("../../src/constants/Strings");
const ControlManager_1 = require("../../src/controls/ControlManager");
const AmazonBuiltInSlotType_1 = require("../../src/intents/AmazonBuiltInSlotType");
const GeneralControlIntent_1 = require("../../src/intents/GeneralControlIntent");
const SingleValueControlIntent_1 = require("../../src/intents/SingleValueControlIntent");
const ControlHandler_1 = require("../../src/runtime/ControlHandler");
const TestingUtils_1 = require("../../src/utils/testSupport/TestingUtils");
TestingUtils_1.waitForDebugger();
mocha_1.suite('NumberControl e2e tests', () => {
    mocha_1.suite('NumberControl e2e tests - NumberControl without validation nor expectation', () => {
        const TEST_CONTROL_ID = 'NumberSelectorWithoutValidationExpectation';
        class NumberControlManager extends ControlManager_1.ControlManager {
            createControlTree(state) {
                return new NumberControl_1.NumberControl({
                    id: TEST_CONTROL_ID,
                    confirmationRequired: true
                });
            }
        }
        mocha_1.test('number valid but without expectation, needs explicit affirming', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: What number?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
    });
    mocha_1.suite('NumberControl e2e tests - NumberControl with expectation function and validation functions', () => {
        const TEST_CONTROL_ID = 'NumberSelectorWithoutValidationExpectation';
        class NumberControlManager extends ControlManager_1.ControlManager {
            createControlTree(state) {
                return new NumberControl_1.NumberControl({
                    id: TEST_CONTROL_ID,
                    prompts: {},
                    validation: [
                        state => (state.value > 0) || { renderedReason: 'the value must be positive' },
                        state => (state.value % 2 === 0) || { renderedReason: 'the value must be even' }
                    ],
                    confirmationRequired: (state, input) => state.value !== undefined && (state.value < 10 || state.value > 20)
                });
            }
        }
        mocha_1.test('first number not valid but expected, second number valid and expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: What number?',
                'U: Fifteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '15' })),
                'A: Sorry but that\'s not a valid choice because the value must be even. What number?',
                'U: Sixteen.', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Ok. Value set to 16.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
    });
    mocha_1.suite('NumberControl e2e tests - NumberControl with custom validation and expectation', () => {
        const TEST_CONTROL_ID = 'NumberSelectorWithValidationExpectation';
        class NumberControlManager extends ControlManager_1.ControlManager {
            createControlTree(state) {
                return new NumberControl_1.NumberControl({
                    id: TEST_CONTROL_ID,
                    prompts: {
                        requestValue: () => ['How many?']
                    },
                    validation: state => (state.value >= 0 && state.value <= 50) || { renderedReason: 'the value must be between zero and fifty inclusive' },
                    confirmationRequired: (state, input) => state.value !== undefined && ![1, 2, 3, 4, 5, 6].includes(state.value),
                });
            }
        }
        mocha_1.test('input number valid and expected, do not need confirmation', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Six', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '6' })),
                'A: Ok. Value set to 6.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(6);
        });
        mocha_1.test('number valid but not expected, needs explicit affirming', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
        mocha_1.test('overfilling the affirmation', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes, change it to 16', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Affirm, "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '16' })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
        mocha_1.test('affirmation with a different value, confirm user with the latest number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Yes, change it to 6', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Affirm, "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '6' })),
                'A: Sorry the previous value is 16, but you confirmed to a different number. Was that 6?',
                'U: Yes.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(6);
        });
        mocha_1.test('disaffirm with the same value, confirm user with the number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No, change it to 16', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '16' })),
                'A: Sorry you disagreed but with the same number. How many?',
                'U: Yes.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
        mocha_1.test('only provide a same value during confirmation, confirm user with the existing number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: 16', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(16);
        });
        mocha_1.test('only provide a different value during confirmation, confirm user with the new number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: Change it to 6', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '6' })),
                'A: Ok. Value set to 6.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(6);
        });
        mocha_1.test('first number strictly disaffirmed, propose user with ambiguous pair based on the first number', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Fifteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '15' })),
                'A: Was that 15?',
                'U: No, fifteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, 'AMAZON.NUMBER': '15' })),
                'A: Sorry you disagreed but with the same number. Did you perhaps mean 50?',
                'U: Yes', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(50);
        });
        mocha_1.test('first number strictly disaffirmed, but ambiguous pair invalid, request value from user', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No.', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Disaffirm })),
                'A: My mistake. How many?',
                'U: Set to five', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '5' })),
                'A: Ok. Value set to 5.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(5);
        });
        mocha_1.test('first number disaffirmed, second number invalid, third number expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No, sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, 'AMAZON.NUMBER': '16' })),
                'A: Sorry you disagreed but with the same number. How many?',
                'U: No, one thousand', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, 'AMAZON.NUMBER': '1000' })),
                'A: Sorry but that\'s not a valid choice because the value must be between zero and fifty inclusive. How many?',
                'U: No, change to 26', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "feedback": Strings_1.Strings.Feedback.Disaffirm, "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '26' })),
                'A: Was that 26?',
                'U: Yes', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(26);
        });
        mocha_1.test('first number disaffirmed, ambiguous pair hit but still disaffirmed, third number expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Forty', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '40' })),
                'A: Was that 40?',
                'U: No', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Disaffirm })),
                'A: My mistake. Did you perhaps mean 14?',
                'U: No', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Disaffirm })),
                'A: My mistake. How many?',
                'U: Three', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '3' })),
                'A: Ok. Value set to 3.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(3);
        });
        mocha_1.test('first number disaffirmed, unusable repeated number happens, third number expected', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: ', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({})),
                'A: How many?',
                'U: Sixteen', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '16' })),
                'A: Was that 16?',
                'U: No', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Disaffirm })),
                'A: My mistake. How many?',
                'U: Change the number', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ action: Strings_1.Strings.Action.Change, target: 'number' })),
                'A: How many?',
                'U: I want sixteen of them', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: I\'m really sorry but I heard 16 again. How many?',
                'U: Never mind I want 20', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '20' })),
                'A: Was that 20?',
                'U: No', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Disaffirm })),
                'A: My mistake. How many?',
                'U: I want sixteen of them', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Set, 'AMAZON.NUMBER': '16' })),
                'A: I\'m really sorry but I heard 16 again. How many?',
                'U: Never mind I want 20', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '20' })),
                'A: I\'m really sorry but I heard 20 again. How many?',
                'U: Change to Five', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { "action": Strings_1.Strings.Action.Change, 'AMAZON.NUMBER': '5' })),
                'A: Ok. Value set to 5.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(5);
        });
        mocha_1.test('handling special number like negative and zero', async () => {
            const requestHandler = new ControlHandler_1.ControlHandler(new NumberControlManager());
            await TestingUtils_1.testE2E(requestHandler, [
                'U: Minus ten.', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '-10' })),
                'A: Sorry but that\'s not a valid choice because the value must be between zero and fifty inclusive. How many?',
                'U: Zero', TestingUtils_1.TestInput.of(SingleValueControlIntent_1.SingleValueControlIntent.of(AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.NUMBER, { 'AMAZON.NUMBER': '0' })),
                'A: Was that 0?',
                'U: Yes', TestingUtils_1.TestInput.of(GeneralControlIntent_1.GeneralControlIntent.of({ feedback: Strings_1.Strings.Feedback.Affirm })),
                'A: Great.'
            ]);
            chai_1.expect(requestHandler.getSerializableControlStates()[TEST_CONTROL_ID].value).eq(0);
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTnVtYmVyQ29udHJvbC5zcGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdGVzdC9jb21tb25Db250cm9sVGVzdHMvTnVtYmVyQ29udHJvbC5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7R0FXRzs7QUFFSCwrQkFBOEI7QUFDOUIsaUNBQW9DO0FBQ3BDLDBFQUEyRjtBQUMzRix5REFBMkQ7QUFFM0Qsc0VBQW1FO0FBQ25FLG1GQUFnRjtBQUNoRixpRkFBOEU7QUFDOUUseUZBQXNGO0FBQ3RGLHFFQUFrRTtBQUNsRSwyRUFBK0Y7QUFFL0YsOEJBQWUsRUFBRSxDQUFDO0FBRWxCLGFBQUssQ0FBQyx5QkFBeUIsRUFBRSxHQUFHLEVBQUU7SUFDbEMsYUFBSyxDQUFDLDRFQUE0RSxFQUFFLEdBQUcsRUFBRTtRQUNyRixNQUFNLGVBQWUsR0FBRyw0Q0FBNEMsQ0FBQztRQUVyRSxNQUFNLG9CQUFxQixTQUFRLCtCQUFjO1lBQzdDLGlCQUFpQixDQUFDLEtBQVU7Z0JBQ3hCLE9BQU8sSUFBSSw2QkFBYSxDQUFDO29CQUNyQixFQUFFLEVBQUUsZUFBZTtvQkFDbkIsb0JBQW9CLEVBQUUsSUFBSTtpQkFDN0IsQ0FBQyxDQUFDO1lBQ1AsQ0FBQztTQUNKO1FBRUQsWUFBSSxDQUFDLGdFQUFnRSxFQUFFLEtBQUssSUFBSSxFQUFFO1lBQzlFLE1BQU0sY0FBYyxHQUFHLElBQUksK0JBQWMsQ0FBQyxJQUFJLG9CQUFvQixFQUFFLENBQUMsQ0FBQztZQUN0RSxNQUFNLHNCQUFPLENBQUMsY0FBYyxFQUFFO2dCQUMxQixLQUFLLEVBQUUsd0JBQVMsQ0FBQyxFQUFFLENBQUMsMkNBQW9CLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNoRCxpQkFBaUI7Z0JBQ2pCLFlBQVksRUFBRSx3QkFBUyxDQUFDLEVBQUUsQ0FBQyxtREFBd0IsQ0FBQyxFQUFFLENBQUMsNkNBQXFCLENBQUMsTUFBTSxFQUFF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QyxDQUFDLENBQUMsQ0FBQztRQUMvRyxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMjAgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAnTGljZW5zZScpLlxuICogWW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogQSBjb3B5IG9mIHRoZSBMaWNlbnNlIGlzIGxvY2F0ZWQgYXRcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogb3IgaW4gdGhlICdsaWNlbnNlJyBmaWxlIGFjY29tcGFueWluZyB0aGlzIGZpbGUuIFRoaXMgZmlsZSBpcyBkaXN0cmlidXRlZFxuICogb24gYW4gJ0FTIElTJyBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlclxuICogZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmdcbiAqIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcbmltcG9ydCB7IHN1aXRlLCB0ZXN0IH0gZnJvbSAnbW9jaGEnO1xuaW1wb3J0IHsgTnVtYmVyQ29udHJvbCwgTnVtYmVyQ29udHJvbFN0YXRlIH0gZnJvbSAnLi4vLi4vc3JjL2NvbW1vbkNvbnRyb2xzL051bWJlckNvbnRyb2wnO1xuaW1wb3J0IHsgU3RyaW5ncyBhcyAkIH0gZnJvbSBcIi4uLy4uL3NyYy9jb25zdGFudHMvU3RyaW5nc1wiO1xuaW1wb3J0IHsgQ29udHJvbCB9IGZyb20gJy4uLy4uL3NyYy9jb250cm9scy9Db250cm9sJztcbmltcG9ydCB7IENvbnRyb2xNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL2NvbnRyb2xzL0NvbnRyb2xNYW5hZ2VyJztcbmltcG9ydCB7IEFtYXpvbkJ1aWx0SW5TbG90VHlwZSB9IGZyb20gJy4uLy4uL3NyYy9pbnRlbnRzL0FtYXpvbkJ1aWx0SW5TbG90VHlwZSc7XG5pbXBvcnQgeyBHZW5lcmFsQ29udHJvbEludGVudCB9IGZyb20gJy4uLy4uL3NyYy9pbnRlbnRzL0dlbmVyYWxDb250cm9sSW50ZW50JztcbmltcG9ydCB7IFNpbmdsZVZhbHVlQ29udHJvbEludGVudCB9IGZyb20gJy4uLy4uL3NyYy9pbnRlbnRzL1NpbmdsZVZhbHVlQ29udHJvbEludGVudCc7XG5pbXBvcnQgeyBDb250cm9sSGFuZGxlciB9IGZyb20gJy4uLy4uL3NyYy9ydW50aW1lL0NvbnRyb2xIYW5kbGVyJztcbmltcG9ydCB7IHRlc3RFMkUsIFRlc3RJbnB1dCwgd2FpdEZvckRlYnVnZ2VyIH0gZnJvbSAnLi4vLi4vc3JjL3V0aWxzL3Rlc3RTdXBwb3J0L1Rlc3RpbmdVdGlscyc7XG5cbndhaXRGb3JEZWJ1Z2dlcigpO1xuXG5zdWl0ZSgnTnVtYmVyQ29udHJvbCBlMmUgdGVzdHMnLCAoKSA9PiB7XG4gICAgc3VpdGUoJ051bWJlckNvbnRyb2wgZTJlIHRlc3RzIC0gTnVtYmVyQ29udHJvbCB3aXRob3V0IHZhbGlkYXRpb24gbm9yIGV4cGVjdGF0aW9uJywgKCkgPT4ge1xuICAgICAgICBjb25zdCBURVNUX0NPTlRST0xfSUQgPSAnTnVtYmVyU2VsZWN0b3JXaXRob3V0VmFsaWRhdGlvbkV4cGVjdGF0aW9uJztcblxuICAgICAgICBjbGFzcyBOdW1iZXJDb250cm9sTWFuYWdlciBleHRlbmRzIENvbnRyb2xNYW5hZ2VyIHtcbiAgICAgICAgICAgIGNyZWF0ZUNvbnRyb2xUcmVlKHN0YXRlOiBhbnkpOiBDb250cm9sIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IE51bWJlckNvbnRyb2woe1xuICAgICAgICAgICAgICAgICAgICBpZDogVEVTVF9DT05UUk9MX0lELFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25SZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGVzdCgnbnVtYmVyIHZhbGlkIGJ1dCB3aXRob3V0IGV4cGVjdGF0aW9uLCBuZWVkcyBleHBsaWNpdCBhZmZpcm1pbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6ICcsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7fSkpLFxuICAgICAgICAgICAgICAgICdBOiBXaGF0IG51bWJlcj8nLFxuICAgICAgICAgICAgICAgICdVOiBTaXh0ZWVuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7ICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcy4nLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBmZWVkYmFjazogJC5GZWVkYmFjay5BZmZpcm0gfSkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMTYpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHN1aXRlKCdOdW1iZXJDb250cm9sIGUyZSB0ZXN0cyAtIE51bWJlckNvbnRyb2wgd2l0aCBleHBlY3RhdGlvbiBmdW5jdGlvbiBhbmQgdmFsaWRhdGlvbiBmdW5jdGlvbnMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFRFU1RfQ09OVFJPTF9JRCA9ICdOdW1iZXJTZWxlY3RvcldpdGhvdXRWYWxpZGF0aW9uRXhwZWN0YXRpb24nO1xuXG4gICAgICAgIGNsYXNzIE51bWJlckNvbnRyb2xNYW5hZ2VyIGV4dGVuZHMgQ29udHJvbE1hbmFnZXIge1xuICAgICAgICAgICAgY3JlYXRlQ29udHJvbFRyZWUoc3RhdGU6IGFueSk6IENvbnRyb2wge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBURVNUX0NPTlRST0xfSUQsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdHM6IHt9LFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9PiAoc3RhdGUudmFsdWUhID4gMCkgfHwgeyByZW5kZXJlZFJlYXNvbjogJ3RoZSB2YWx1ZSBtdXN0IGJlIHBvc2l0aXZlJ30sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9PiAoc3RhdGUudmFsdWUhICUgMiA9PT0gMCkgfHwgeyByZW5kZXJlZFJlYXNvbjogJ3RoZSB2YWx1ZSBtdXN0IGJlIGV2ZW4nfVxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBjb25maXJtYXRpb25SZXF1aXJlZDogKHN0YXRlLCBpbnB1dCkgPT4gc3RhdGUudmFsdWUgIT09IHVuZGVmaW5lZCAmJiAoc3RhdGUudmFsdWUgPCAxMCB8fCBzdGF0ZS52YWx1ZSA+IDIwKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGVzdCgnZmlyc3QgbnVtYmVyIG5vdCB2YWxpZCBidXQgZXhwZWN0ZWQsIHNlY29uZCBudW1iZXIgdmFsaWQgYW5kIGV4cGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IE51bWJlckNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiAnLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2Yoe30pKSxcbiAgICAgICAgICAgICAgICAnQTogV2hhdCBudW1iZXI/JyxcbiAgICAgICAgICAgICAgICAnVTogRmlmdGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyAnQU1BWk9OLk5VTUJFUic6ICcxNScgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgY2hvaWNlIGJlY2F1c2UgdGhlIHZhbHVlIG11c3QgYmUgZXZlbi4gV2hhdCBudW1iZXI/JyxcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbi4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byAxNi4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMTYpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIHN1aXRlKCdOdW1iZXJDb250cm9sIGUyZSB0ZXN0cyAtIE51bWJlckNvbnRyb2wgd2l0aCBjdXN0b20gdmFsaWRhdGlvbiBhbmQgZXhwZWN0YXRpb24nLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IFRFU1RfQ09OVFJPTF9JRCA9ICdOdW1iZXJTZWxlY3RvcldpdGhWYWxpZGF0aW9uRXhwZWN0YXRpb24nO1xuXG4gICAgICAgIGNsYXNzIE51bWJlckNvbnRyb2xNYW5hZ2VyIGV4dGVuZHMgQ29udHJvbE1hbmFnZXIge1xuICAgICAgICAgICAgY3JlYXRlQ29udHJvbFRyZWUoc3RhdGU6IGFueSk6IENvbnRyb2wge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTnVtYmVyQ29udHJvbCh7XG4gICAgICAgICAgICAgICAgICAgIGlkOiBURVNUX0NPTlRST0xfSUQsXG4gICAgICAgICAgICAgICAgICAgIHByb21wdHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RWYWx1ZTogKCkgPT4gWydIb3cgbWFueT8nXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB2YWxpZGF0aW9uOiBzdGF0ZSA9PiAoc3RhdGUudmFsdWUhID49IDAgJiYgc3RhdGUudmFsdWUhIDw9IDUwKSB8fCB7IHJlbmRlcmVkUmVhc29uOiAndGhlIHZhbHVlIG11c3QgYmUgYmV0d2VlbiB6ZXJvIGFuZCBmaWZ0eSBpbmNsdXNpdmUnfSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uUmVxdWlyZWQ6IChzdGF0ZSwgaW5wdXQpID0+IHN0YXRlLnZhbHVlICE9PSB1bmRlZmluZWQgJiYgIVsxLCAyLCAzLCA0LCA1LCA2XS5pbmNsdWRlcyhzdGF0ZS52YWx1ZSksXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0ZXN0KCdpbnB1dCBudW1iZXIgdmFsaWQgYW5kIGV4cGVjdGVkLCBkbyBub3QgbmVlZCBjb25maXJtYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byA2LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSg2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnbnVtYmVyIHZhbGlkIGJ1dCBub3QgZXhwZWN0ZWQsIG5lZWRzIGV4cGxpY2l0IGFmZmlybWluZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHt9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMTY/JyxcbiAgICAgICAgICAgICAgICAnVTogWWVzLicsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGZlZWRiYWNrOiAkLkZlZWRiYWNrLkFmZmlybSB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEdyZWF0LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSgxNik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ292ZXJmaWxsaW5nIHRoZSBhZmZpcm1hdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcywgY2hhbmdlIGl0IHRvIDE2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiZmVlZGJhY2tcIjogJC5GZWVkYmFjay5BZmZpcm0sIFwiYWN0aW9uXCI6ICQuQWN0aW9uLkNoYW5nZSwgJ0FNQVpPTi5OVU1CRVInOiAnMTYnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogR3JlYXQuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDE2KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnYWZmaXJtYXRpb24gd2l0aCBhIGRpZmZlcmVudCB2YWx1ZSwgY29uZmlybSB1c2VyIHdpdGggdGhlIGxhdGVzdCBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBZZXMsIGNoYW5nZSBpdCB0byA2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiZmVlZGJhY2tcIjogJC5GZWVkYmFjay5BZmZpcm0sIFwiYWN0aW9uXCI6ICQuQWN0aW9uLkNoYW5nZSwgJ0FNQVpPTi5OVU1CRVInOiAnNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSB0aGUgcHJldmlvdXMgdmFsdWUgaXMgMTYsIGJ1dCB5b3UgY29uZmlybWVkIHRvIGEgZGlmZmVyZW50IG51bWJlci4gV2FzIHRoYXQgNj8nLFxuICAgICAgICAgICAgICAgICdVOiBZZXMuJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHsgZmVlZGJhY2s6ICQuRmVlZGJhY2suQWZmaXJtIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogR3JlYXQuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDYpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdkaXNhZmZpcm0gd2l0aCB0aGUgc2FtZSB2YWx1ZSwgY29uZmlybSB1c2VyIHdpdGggdGhlIG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IE5vLCBjaGFuZ2UgaXQgdG8gMTYnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJmZWVkYmFja1wiOiAkLkZlZWRiYWNrLkRpc2FmZmlybSwgXCJhY3Rpb25cIjogJC5BY3Rpb24uQ2hhbmdlLCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSB5b3UgZGlzYWdyZWVkIGJ1dCB3aXRoIHRoZSBzYW1lIG51bWJlci4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogWWVzLicsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGZlZWRiYWNrOiAkLkZlZWRiYWNrLkFmZmlybSB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEdyZWF0LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSgxNik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ29ubHkgcHJvdmlkZSBhIHNhbWUgdmFsdWUgZHVyaW5nIGNvbmZpcm1hdGlvbiwgY29uZmlybSB1c2VyIHdpdGggdGhlIGV4aXN0aW5nIG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IDE2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7ICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEdyZWF0LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSgxNik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ29ubHkgcHJvdmlkZSBhIGRpZmZlcmVudCB2YWx1ZSBkdXJpbmcgY29uZmlybWF0aW9uLCBjb25maXJtIHVzZXIgd2l0aCB0aGUgbmV3IG51bWJlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogU2l4dGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IENoYW5nZSBpdCB0byA2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7IFwiYWN0aW9uXCI6ICQuQWN0aW9uLkNoYW5nZSwgJ0FNQVpPTi5OVU1CRVInOiAnNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBPay4gVmFsdWUgc2V0IHRvIDYuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDYpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdmaXJzdCBudW1iZXIgc3RyaWN0bHkgZGlzYWZmaXJtZWQsIHByb3Bvc2UgdXNlciB3aXRoIGFtYmlndW91cyBwYWlyIGJhc2VkIG9uIHRoZSBmaXJzdCBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IEZpZnRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNScgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNT8nLFxuICAgICAgICAgICAgICAgICdVOiBObywgZmlmdGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImZlZWRiYWNrXCI6ICQuRmVlZGJhY2suRGlzYWZmaXJtLCAnQU1BWk9OLk5VTUJFUic6ICcxNScgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSB5b3UgZGlzYWdyZWVkIGJ1dCB3aXRoIHRoZSBzYW1lIG51bWJlci4gRGlkIHlvdSBwZXJoYXBzIG1lYW4gNTA/JyxcbiAgICAgICAgICAgICAgICAnVTogWWVzJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHsgZmVlZGJhY2s6ICQuRmVlZGJhY2suQWZmaXJtIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogR3JlYXQuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDUwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZmlyc3QgbnVtYmVyIHN0cmljdGx5IGRpc2FmZmlybWVkLCBidXQgYW1iaWd1b3VzIHBhaXIgaW52YWxpZCwgcmVxdWVzdCB2YWx1ZSBmcm9tIHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBOby4nLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBmZWVkYmFjazogJC5GZWVkYmFjay5EaXNhZmZpcm0gfSkpLFxuICAgICAgICAgICAgICAgICdBOiBNeSBtaXN0YWtlLiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBTZXQgdG8gZml2ZScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzUnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byA1LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSg1KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnZmlyc3QgbnVtYmVyIGRpc2FmZmlybWVkLCBzZWNvbmQgbnVtYmVyIGludmFsaWQsIHRoaXJkIG51bWJlciBleHBlY3RlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHt9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IFNpeHRlZW4nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCAxNj8nLFxuICAgICAgICAgICAgICAgICdVOiBObywgc2l4dGVlbicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImZlZWRiYWNrXCI6ICQuRmVlZGJhY2suRGlzYWZmaXJtLCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBTb3JyeSB5b3UgZGlzYWdyZWVkIGJ1dCB3aXRoIHRoZSBzYW1lIG51bWJlci4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8sIG9uZSB0aG91c2FuZCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImZlZWRiYWNrXCI6ICQuRmVlZGJhY2suRGlzYWZmaXJtLCAnQU1BWk9OLk5VTUJFUic6ICcxMDAwJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFNvcnJ5IGJ1dCB0aGF0XFwncyBub3QgYSB2YWxpZCBjaG9pY2UgYmVjYXVzZSB0aGUgdmFsdWUgbXVzdCBiZSBiZXR3ZWVuIHplcm8gYW5kIGZpZnR5IGluY2x1c2l2ZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogTm8sIGNoYW5nZSB0byAyNicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImZlZWRiYWNrXCI6ICQuRmVlZGJhY2suRGlzYWZmaXJtLCBcImFjdGlvblwiOiAkLkFjdGlvbi5DaGFuZ2UsICdBTUFaT04uTlVNQkVSJzogJzI2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDI2PycsXG4gICAgICAgICAgICAgICAgJ1U6IFllcycsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGZlZWRiYWNrOiAkLkZlZWRiYWNrLkFmZmlybSB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEdyZWF0LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSgyNik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRlc3QoJ2ZpcnN0IG51bWJlciBkaXNhZmZpcm1lZCwgYW1iaWd1b3VzIHBhaXIgaGl0IGJ1dCBzdGlsbCBkaXNhZmZpcm1lZCwgdGhpcmQgbnVtYmVyIGV4cGVjdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVxdWVzdEhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IE51bWJlckNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShyZXF1ZXN0SGFuZGxlciwgW1xuICAgICAgICAgICAgICAgICdVOiAnLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2Yoe30pKSxcbiAgICAgICAgICAgICAgICAnQTogSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogRm9ydHknLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICc0MCcgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBXYXMgdGhhdCA0MD8nLFxuICAgICAgICAgICAgICAgICdVOiBObycsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7IGZlZWRiYWNrOiAkLkZlZWRiYWNrLkRpc2FmZmlybSB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IE15IG1pc3Rha2UuIERpZCB5b3UgcGVyaGFwcyBtZWFuIDE0PycsXG4gICAgICAgICAgICAgICAgJ1U6IE5vJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHsgZmVlZGJhY2s6ICQuRmVlZGJhY2suRGlzYWZmaXJtIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogVGhyZWUnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMycgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBPay4gVmFsdWUgc2V0IHRvIDMuJ1xuICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICBleHBlY3QoKHJlcXVlc3RIYW5kbGVyLmdldFNlcmlhbGl6YWJsZUNvbnRyb2xTdGF0ZXMoKVtURVNUX0NPTlRST0xfSURdIGFzIE51bWJlckNvbnRyb2xTdGF0ZSkudmFsdWUpLmVxKDMpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCdmaXJzdCBudW1iZXIgZGlzYWZmaXJtZWQsIHVudXNhYmxlIHJlcGVhdGVkIG51bWJlciBoYXBwZW5zLCB0aGlyZCBudW1iZXIgZXhwZWN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0SGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgTnVtYmVyQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKHJlcXVlc3RIYW5kbGVyLCBbXG4gICAgICAgICAgICAgICAgJ1U6ICcsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7fSkpLFxuICAgICAgICAgICAgICAgICdBOiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBTaXh0ZWVuJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7ICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDE2PycsXG4gICAgICAgICAgICAgICAgJ1U6IE5vJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHsgZmVlZGJhY2s6ICQuRmVlZGJhY2suRGlzYWZmaXJtIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogQ2hhbmdlIHRoZSBudW1iZXInLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBhY3Rpb246ICQuQWN0aW9uLkNoYW5nZSwgdGFyZ2V0OiAnbnVtYmVyJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IEkgd2FudCBzaXh0ZWVuIG9mIHRoZW0nLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgXCJhY3Rpb25cIjogJC5BY3Rpb24uU2V0LCAnQU1BWk9OLk5VTUJFUic6ICcxNicgfSkpLFxuICAgICAgICAgICAgICAgICdBOiBJXFwnbSByZWFsbHkgc29ycnkgYnV0IEkgaGVhcmQgMTYgYWdhaW4uIEhvdyBtYW55PycsXG4gICAgICAgICAgICAgICAgJ1U6IE5ldmVyIG1pbmQgSSB3YW50IDIwJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7ICdBTUFaT04uTlVNQkVSJzogJzIwJyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IFdhcyB0aGF0IDIwPycsXG4gICAgICAgICAgICAgICAgJ1U6IE5vJywgVGVzdElucHV0Lm9mKEdlbmVyYWxDb250cm9sSW50ZW50Lm9mKHsgZmVlZGJhY2s6ICQuRmVlZGJhY2suRGlzYWZmaXJtIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogTXkgbWlzdGFrZS4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogSSB3YW50IHNpeHRlZW4gb2YgdGhlbScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5TZXQsICdBTUFaT04uTlVNQkVSJzogJzE2JyB9KSksXG4gICAgICAgICAgICAgICAgJ0E6IElcXCdtIHJlYWxseSBzb3JyeSBidXQgSSBoZWFyZCAxNiBhZ2Fpbi4gSG93IG1hbnk/JyxcbiAgICAgICAgICAgICAgICAnVTogTmV2ZXIgbWluZCBJIHdhbnQgMjAnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5OVU1CRVIsIHsgJ0FNQVpPTi5OVU1CRVInOiAnMjAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogSVxcJ20gcmVhbGx5IHNvcnJ5IGJ1dCBJIGhlYXJkIDIwIGFnYWluLiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBDaGFuZ2UgdG8gRml2ZScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyBcImFjdGlvblwiOiAkLkFjdGlvbi5DaGFuZ2UsICdBTUFaT04uTlVNQkVSJzogJzUnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogT2suIFZhbHVlIHNldCB0byA1LidcbiAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgZXhwZWN0KChyZXF1ZXN0SGFuZGxlci5nZXRTZXJpYWxpemFibGVDb250cm9sU3RhdGVzKClbVEVTVF9DT05UUk9MX0lEXSBhcyBOdW1iZXJDb250cm9sU3RhdGUpLnZhbHVlKS5lcSg1KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGVzdCgnaGFuZGxpbmcgc3BlY2lhbCBudW1iZXIgbGlrZSBuZWdhdGl2ZSBhbmQgemVybycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RIYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBOdW1iZXJDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUocmVxdWVzdEhhbmRsZXIsIFtcbiAgICAgICAgICAgICAgICAnVTogTWludXMgdGVuLicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLk5VTUJFUiwgeyAnQU1BWk9OLk5VTUJFUic6ICctMTAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogU29ycnkgYnV0IHRoYXRcXCdzIG5vdCBhIHZhbGlkIGNob2ljZSBiZWNhdXNlIHRoZSB2YWx1ZSBtdXN0IGJlIGJldHdlZW4gemVybyBhbmQgZmlmdHkgaW5jbHVzaXZlLiBIb3cgbWFueT8nLFxuICAgICAgICAgICAgICAgICdVOiBaZXJvJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuTlVNQkVSLCB7ICdBTUFaT04uTlVNQkVSJzogJzAnIH0pKSxcbiAgICAgICAgICAgICAgICAnQTogV2FzIHRoYXQgMD8nLFxuICAgICAgICAgICAgICAgICdVOiBZZXMnLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2YoeyBmZWVkYmFjazogJC5GZWVkYmFjay5BZmZpcm0gfSkpLFxuICAgICAgICAgICAgICAgICdBOiBHcmVhdC4nXG4gICAgICAgICAgICBdKTtcbiAgICAgICAgICAgIGV4cGVjdCgocmVxdWVzdEhhbmRsZXIuZ2V0U2VyaWFsaXphYmxlQ29udHJvbFN0YXRlcygpW1RFU1RfQ09OVFJPTF9JRF0gYXMgTnVtYmVyQ29udHJvbFN0YXRlKS52YWx1ZSkuZXEoMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7XG4iXX0=