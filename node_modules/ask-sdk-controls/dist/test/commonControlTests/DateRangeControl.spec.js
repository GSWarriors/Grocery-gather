"use strict";
/*
 * Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License").
 * You may not use this file except in compliance with the License.
 * A copy of the License is located at
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * or in the "license" file accompanying this file. This file is distributed
 * on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
 * express or implied. See the License for the specific language governing
 * permissions and limitations under the License.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const chai_1 = require("chai");
const mocha_1 = require("mocha");
const sinon_1 = tslib_1.__importDefault(require("sinon"));
const ArrayUtil = tslib_1.__importStar(require("../../src/utils/ArrayUtils"));
const src_1 = require("../../src");
const Strings_1 = require("../../src/constants/Strings");
const ConjunctionControlIntent_1 = require("../../src/intents/ConjunctionControlIntent");
function dateRangeControlUnderTest() {
    return new src_1.DateRangeControl({
        id: 'DateRangeControl',
        interactionModel: {
            targets: {
                self: ['photos', 'date']
            },
            actions: {
                set: ['show', 'set'],
                change: ['change']
            },
        },
        validation: {
            rangeValid: [src_1.DateRangeControlValidations.START_BEFORE_END],
            startDateValid: [src_1.DateControlValidations.PAST_DATE_ONLY],
            endDateValid: [src_1.DateControlValidations.PAST_DATE_ONLY]
        },
        required: true
    });
}
class StrictDateRangeControlManager extends src_1.ControlManager {
    createControlTree(state) {
        return dateRangeControlUnderTest();
    }
}
const askForStartPrompts = ['start date please ?', 'Please give me the start date.'];
const valueSetPrompts = ['Ok.', 'Roger.'];
const askForEndPrompts = ['End date please ?', 'Please give me the end date.'];
const askForBothPrompts = ['What is the start date and end date you want ?', 'Please give me the start date and the end date.'];
class VariableResponseTwoDatesControlManager extends src_1.ControlManager {
    createControlTree(state) {
        return new src_1.DateRangeControl({
            id: 'DateRangeControl',
            interactionModel: {
                targets: {
                    self: ['photos', 'date']
                },
                actions: {
                    set: ['show', 'set'],
                    change: ['change']
                },
            },
            validation: {
                rangeValid: [src_1.DateRangeControlValidations.START_BEFORE_END]
            },
            prompts: {
                startDate: {
                    requestValue: askForStartPrompts,
                    valueSet: valueSetPrompts
                },
                endDate: {
                    requestValue: askForEndPrompts,
                    valueSet: valueSetPrompts
                },
                requestRange: askForBothPrompts
            }
        });
    }
}
mocha_1.suite('DateRangeControl', () => {
    beforeEach(() => {
        // set now to 2019-01-03
        sinon_1.default.useFakeTimers(new Date('2019-01-03T21:55:38.151Z'));
    });
    afterEach(() => {
        sinon_1.default.restore();
    });
    mocha_1.suite('E2E tests', () => {
        mocha_1.suite('Only DateRangeControlIntent & DateControlIntent', () => {
            mocha_1.test('both start date and end date provided', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set start date to 2017 and end date to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action.a': Strings_1.Strings.Action.Set,
                        'target.a': 'startDate',
                        'AMAZON.DATE.a': '2017',
                        'action.b': Strings_1.Strings.Action.Set,
                        'target.b': 'endDate',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                ]);
            });
            mocha_1.test('both start date and end date provided but in simple words', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                ]);
            });
            mocha_1.test('should ask for end date when only start date is set', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set start date to 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'startDate',
                        'AMAZON.DATE': '2017',
                    })),
                    'A: Got it. The start date is 2017. What is the end date you want?',
                    'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2018',
                    })),
                    'A: Got it. The end date is 2018.',
                ]);
            });
            mocha_1.test('should ask for start date when end start date is set', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set end date to 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'endDate',
                        'AMAZON.DATE': '2017',
                    })),
                    'A: Got it. The end date is 2017. What is the start date you want?',
                    'U: 2016', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2016',
                    })),
                    'A: Got it. The start date is 2016.',
                ]);
            });
            mocha_1.test('raw value input should use focus to determine target', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set start date to 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'startDate',
                        'AMAZON.DATE': '2017',
                    })),
                    'A: Got it. The start date is 2017. What is the end date you want?',
                    'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2018',
                    })),
                    'A: Got it. The end date is 2018.',
                    'U: actually 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': 'change',
                        'AMAZON.DATE': '2017',
                    })),
                    'A: Got it. The end date is changed to 2017.',
                ]);
            });
            mocha_1.test('should mention both change if two value changed together', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set start date to 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'startDate',
                        'AMAZON.DATE': '2017',
                    })),
                    'A: Got it. The start date is 2017. What is the end date you want?',
                    'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2018',
                    })),
                    'A: Got it. The end date is 2018.',
                    'U: actually 2015 to 2016', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2015',
                        'AMAZON.DATE.b': '2016',
                    })),
                    'A: Got it. The start date is changed to 2015-01-01 and the end date is changed to 2016-12-31.',
                ]);
            });
            mocha_1.test('only raw value input should be regarded as range if no previous context', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, { 'AMAZON.DATE': '2018' })),
                    'A: Got it. The start date is 2018-01-01 and the end date is 2018-12-31.',
                ]);
            });
            mocha_1.test('When there is lastInitiative child and focus is actually on parent, raw value should be consumed by parent', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set start date to 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'startDate',
                        'AMAZON.DATE': '2017',
                    })),
                    'A: Got it. The start date is 2017. What is the end date you want?',
                    'U: Actually change date from 2015-01-01 to 2016-12-31', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Change,
                        'target': 'date',
                        'AMAZON.DATE.a': '2015',
                        'AMAZON.DATE.b': '2016'
                    })),
                    'A: Got it. The start date is 2015-01-01 and the end date is 2016-12-31.',
                    'U: change date to 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Change,
                        'target': 'date',
                        'AMAZON.DATE': '2017',
                    })),
                    'A: Got it. The start date is changed to 2017-01-01 and the end date is changed to 2017-12-31.',
                ]);
            });
            mocha_1.test('when target ambiguous, and two value provided, should transfer date to startDate and endDate', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                ]);
            });
            mocha_1.test('when focus is both, one value will be considered as both', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: 2016', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2016'
                    })),
                    'A: Got it. The start date is changed to 2016-01-01 and the end date is changed to 2016-12-31.',
                ]);
            });
            mocha_1.test('when focus is both, ambiguous target will be considered as both', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: set date to 2016', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE': '2016'
                    })),
                    'A: Got it. The start date is changed to 2016-01-01 and the end date is changed to 2016-12-31.',
                ]);
            });
        });
        mocha_1.suite('Integrate with two builtin validation rules', () => {
            mocha_1.test('should ask for valid end date when end date fails validations', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2017 to 2020', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2020',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2020-12-31. Sorry but that\'s not a valid end date because the date cannot be greater than today. What should I change the end date to?',
                    'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2018',
                    })),
                    'A: Got it. The end date is changed to 2018.'
                ]);
            });
            mocha_1.test('should ask for valid start date when start date fails validations', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set start date to 2020', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'startDate',
                        'AMAZON.DATE': '2020',
                    })),
                    'A: Sorry but that\'s not a valid start date because the date cannot be greater than today. What is the start date you want?',
                    'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2018',
                    })),
                    'A: Got it. The start date is 2018. What is the end date you want?',
                    'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2018',
                    })),
                    'A: Got it. The end date is 2018.',
                ]);
            });
            mocha_1.test('should ask for both start date and end date when both value changed and start date is past end date', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2017 to 2016', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2016',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2016-12-31. Sorry, invalid range because start date can not be greater than end date. What is the start date and end date you want?',
                ]);
            });
            mocha_1.test('should ask for valid end date when start date is past end date, and only end date is changed', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2016 to 2017', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2016',
                        'AMAZON.DATE.b': '2017',
                    })),
                    'A: Got it. The start date is 2016-01-01 and the end date is 2017-12-31.',
                    'U: change end date to 2015', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Change,
                        'target': 'endDate',
                        'AMAZON.DATE': '2015'
                    })),
                    'A: Got it. The end date is changed to 2015. Sorry, invalid range because start date can not be greater than end date. What is the end date you want?',
                ]);
            });
        });
        mocha_1.suite('Integrate with SimpleControlIntent & ConjunctionControlIntent', () => {
            mocha_1.test('change with ambiguous target will ask for both start and end when focus is both, and treat one value input as a range', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: Change date', src_1.TestInput.of(src_1.GeneralControlIntent.of({
                        action: Strings_1.Strings.Action.Change,
                        target: 'date'
                    })),
                    'A: What is the start date and end date you want?',
                    'U: 2015 to 2016', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2015',
                        'AMAZON.DATE.b': '2016',
                    })),
                    'A: Got it. The start date is changed to 2015-01-01 and the end date is changed to 2016-12-31.',
                ]);
            });
            mocha_1.test('change with ambiguous target will only change start when focus is start', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: Change start date to 2015', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Change,
                        'target': 'startDate',
                        'AMAZON.DATE': '2015'
                    })),
                    'A: Got it. The start date is changed to 2015.',
                    'U: change date to 2016', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Change,
                        'target': 'date',
                        'AMAZON.DATE': '2016',
                    })),
                    'A: Got it. The start date is changed to 2016.',
                ]);
            });
            mocha_1.test('change start date and end date', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set start date to 2017 and set end date to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action.a': Strings_1.Strings.Action.Set,
                        'action.b': Strings_1.Strings.Action.Set,
                        'target.a': 'startDate',
                        'target.b': 'endDate',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: Change start date and end date', src_1.TestInput.of(ConjunctionControlIntent_1.ConjunctionControlIntent.of({
                        'action': Strings_1.Strings.Action.Change,
                        'target.a': 'startDate',
                        'target.b': 'endDate'
                    })),
                    'A: What is the start date and end date you want?',
                    'U: 2015 to 2016', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2015',
                        'AMAZON.DATE.b': '2016'
                    })),
                    'A: Got it. The start date is changed to 2015-01-01 and the end date is changed to 2016-12-31.',
                ]);
            });
            mocha_1.test('change with specific target', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: Change start date', src_1.TestInput.of(src_1.GeneralControlIntent.of({
                        action: Strings_1.Strings.Action.Change,
                        target: 'startDate',
                    })),
                    'A: What should I change the start date to?',
                    'U: 2015', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2015',
                    })),
                    'A: Got it. The start date is changed to 2015.',
                ]);
            });
            mocha_1.test('when focus is both, action "change" will be considered to change both start and end date', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: change', src_1.TestInput.of(src_1.GeneralControlIntent.of({
                        action: Strings_1.Strings.Action.Change,
                    })),
                    'A: What is the start date and end date you want?',
                    'U: 2015 to 2016', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2015',
                        'AMAZON.DATE.b': '2016'
                    })),
                    'A: Got it. The start date is changed to 2015-01-01 and the end date is changed to 2016-12-31.',
                ]);
            });
            mocha_1.test('when focus is start date, action "change" will be considered to change start date', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: set date from 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': Strings_1.Strings.Action.Set,
                        'target': 'date',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: change start date to 2016', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'action': Strings_1.Strings.Action.Change,
                        'target': 'startDate',
                        'AMAZON.DATE': '2016',
                    })),
                    'A: Got it. The start date is changed to 2016.',
                    'U: change', src_1.TestInput.of(src_1.GeneralControlIntent.of({
                        action: Strings_1.Strings.Action.Change,
                    })),
                    'A: What should I change the start date to?',
                    'U: 2015', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                        'AMAZON.DATE': '2015',
                    })),
                    'A: Got it. The start date is changed to 2015.',
                ]);
            });
        });
        mocha_1.suite('Integrate with customized action & target', () => {
            mocha_1.test('DateRangeControl should understand customized target photos and action show', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: show photos from 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': 'show',
                        'target': 'photos',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                ]);
            });
            mocha_1.test('GeneralControlIntent & ConjunctionControlIntent should understand customized target photos', async () => {
                const handler = new src_1.ControlHandler(new StrictDateRangeControlManager());
                await src_1.testE2E(handler, [
                    'U: show photos from 2017 to 2018', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'action': 'show',
                        'target': 'photos',
                        'AMAZON.DATE.a': '2017',
                        'AMAZON.DATE.b': '2018',
                    })),
                    'A: Got it. The start date is 2017-01-01 and the end date is 2018-12-31.',
                    'U: change photos', src_1.TestInput.of(src_1.GeneralControlIntent.of({
                        action: Strings_1.Strings.Action.Change,
                        target: 'photos',
                    })),
                    'A: What is the start date and end date you want?',
                    'U: 2015 to 2016', src_1.TestInput.of(src_1.DateRangeControlIntent.of({
                        'AMAZON.DATE.a': '2015',
                        'AMAZON.DATE.b': '2016'
                    })),
                    'A: Got it. The start date is changed to 2015-01-01 and the end date is changed to 2016-12-31.',
                ]);
            });
        });
    });
    mocha_1.suite('Variable response tests', () => {
        beforeEach(() => {
            // Force to return the last one in the array
            sinon_1.default.stub(ArrayUtil, 'randomlyPick').callsFake((input) => input[input.length - 1]);
        });
        afterEach(() => {
            sinon_1.default.restore();
        });
        mocha_1.test('should ask for end date when only start date is set, ', async () => {
            const handler = new src_1.ControlHandler(new VariableResponseTwoDatesControlManager());
            await src_1.testE2E(handler, [
                'U: set start date to 2017', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                    'action': Strings_1.Strings.Action.Set,
                    'target': 'startDate',
                    'AMAZON.DATE': '2017',
                })),
                'A: Roger. Please give me the end date.',
                'U: 2018', src_1.TestInput.of(src_1.SingleValueControlIntent.of(src_1.AmazonBuiltInSlotType.DATE, {
                    'AMAZON.DATE': '2018',
                })),
                'A: Roger.'
            ]);
        });
    });
    mocha_1.suite('DateRangeControl scenarios', () => {
        mocha_1.test('unknown single target should be rejected', async () => {
            const control = dateRangeControlUnderTest();
            const input = src_1.TestInput.of(src_1.DateRangeControlIntent.of({ 'action': Strings_1.Strings.Action.Set, 'target': 'food', 'AMAZON.DATE.a': '2016', 'AMAZON.DATE.b': '2017' }));
            const canHandleResult = await control.canHandle(input);
            chai_1.expect(canHandleResult).false;
        });
        mocha_1.test('two targets with either one unknown should be rejected', async () => {
            const control = dateRangeControlUnderTest();
            const input = src_1.TestInput.of(src_1.DateRangeControlIntent.of({ 'action': Strings_1.Strings.Action.Set, 'target.a': 'startDate', 'target.b': 'food', 'AMAZON.DATE.a': '2016', 'AMAZON.DATE.b': '2017' }));
            const canHandleResult = await control.canHandle(input);
            chai_1.expect(canHandleResult).false;
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0ZVJhbmdlQ29udHJvbC5zcGVjLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vdGVzdC9jb21tb25Db250cm9sVGVzdHMvRGF0ZVJhbmdlQ29udHJvbC5zcGVjLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTs7Ozs7Ozs7Ozs7R0FXRzs7O0FBRUgsK0JBQThCO0FBQzlCLGlDQUFvQztBQUNwQywwREFBMEI7QUFDMUIsOEVBQXdEO0FBQ3hELG1DQU1tQjtBQUNuQix5REFBMkQ7QUFDM0QseUZBQXNGO0FBRXRGLFNBQVMseUJBQXlCO0lBQzlCLE9BQU8sSUFBSSxzQkFBZ0IsQ0FDdkI7UUFDSSxFQUFFLEVBQUUsa0JBQWtCO1FBQ3RCLGdCQUFnQixFQUFFO1lBQ2QsT0FBTyxFQUFFO2dCQUNMLElBQUksRUFBRSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUM7YUFDM0I7WUFDRCxPQUFPLEVBQUU7Z0JBQ0wsR0FBRyxFQUFFLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQztnQkFDcEIsTUFBTSxFQUFFLENBQUMsUUFBUSxDQUFDO2FBQ3JCO1NBQ0o7UUFDRCxVQUFVLEVBQUU7WUFDUixVQUFVLEVBQUUsQ0FBQyxpQ0FBMkIsQ0FBQyxnQkFBZ0IsQ0FBQztZQUMxRCxjQUFjLEVBQUUsQ0FBQyw0QkFBc0IsQ0FBQyxjQUFjLENBQUM7WUFDdkQsWUFBWSxFQUFFLENBQUMsNEJBQXNCLENBQUMsY0FBYyxDQUFDO1NBQ3hEO1FBQ0QsUUFBUSxFQUFFLElBQUk7S0FDakIsQ0FDSixDQUFDO0FBQ04sQ0FBQztBQUNELE1BQU0sNkJBQThCLFNBQVEsb0JBQWM7SUFDdEQsaUJBQWlCLENBQUMsS0FBVTtRQUN4QixPQUFPLHlCQUF5QixFQUFFLENBQUM7SUFDdkMsQ0FBQztDQUNKO0FBRUQsTUFBTSxrQkFBa0IsR0FBRyxDQUFDLHFCQUFxQixFQUFFLGdDQUFnQyxDQUFDLENBQUM7QUFDckYsTUFBTSxlQUFlLEdBQUcsQ0FBQyxLQUFLLEVB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LENBQUM7UUFDbEMsQ0FBQyxDQUFDLENBQUM7UUFFSCxZQUFJLENBQUMsd0RBQXdELEVBQUUsS0FBSyxJQUFJLEVBQUU7WUFDdEUsTUFBTSxPQUFPLEdBQUcseUJBQXlCLEVBQUUsQ0FBQztZQUM1QyxNQUFNLEtBQUssR0FBRyxlQUFTLENBQUMsRUFBRSxDQUFDLDRCQUFzQixDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxpQkFBQyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEVBQUUsVUFBVSxFQUFFLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLGVBQWUsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLE1BQU0sRUFBQyxDQUFDLENBQUMsQ0FBQztZQUNoTCxNQUFNLGVBQWUsR0FBRyxNQUFNLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDdkQsYUFBTSxDQUFDLGVBQWUsQ0FBQyxDQUFDLEtBQUssQ0FBQztRQUNsQyxDQUFDLENBQUMsQ0FBQztJQUVQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMTkgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIikuXG4gKiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBBIGNvcHkgb2YgdGhlIExpY2Vuc2UgaXMgbG9jYXRlZCBhdFxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBvciBpbiB0aGUgXCJsaWNlbnNlXCIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMgZGlzdHJpYnV0ZWRcbiAqIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlclxuICogZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmdcbiAqIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5pbXBvcnQgeyBleHBlY3QgfSBmcm9tICdjaGFpJztcbmltcG9ydCB7IHN1aXRlLCB0ZXN0IH0gZnJvbSAnbW9jaGEnO1xuaW1wb3J0IHNpbm9uIGZyb20gJ3Npbm9uJztcbmltcG9ydCAqIGFzIEFycmF5VXRpbCBmcm9tICcuLi8uLi9zcmMvdXRpbHMvQXJyYXlVdGlscyc7XG5pbXBvcnQge1xuICAgIEFtYXpvbkJ1aWx0SW5TbG90VHlwZSwgQ29udHJvbCxcbiAgICBDb250cm9sSGFuZGxlciwgQ29udHJvbE1hbmFnZXIsIERhdGVDb250cm9sVmFsaWRhdGlvbnMsXG4gICAgRGF0ZVJhbmdlQ29udHJvbCwgRGF0ZVJhbmdlQ29udHJvbEludGVudCxcbiAgICBEYXRlUmFuZ2VDb250cm9sVmFsaWRhdGlvbnMsIEdlbmVyYWxDb250cm9sSW50ZW50LCBTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQsXG4gICAgdGVzdEUyRSwgVGVzdElucHV0XG59IGZyb20gJy4uLy4uL3NyYyc7XG5pbXBvcnQgeyBTdHJpbmdzIGFzICQgfSBmcm9tIFwiLi4vLi4vc3JjL2NvbnN0YW50cy9TdHJpbmdzXCI7XG5pbXBvcnQgeyBDb25qdW5jdGlvbkNvbnRyb2xJbnRlbnQgfSBmcm9tICcuLi8uLi9zcmMvaW50ZW50cy9Db25qdW5jdGlvbkNvbnRyb2xJbnRlbnQnO1xuXG5mdW5jdGlvbiBkYXRlUmFuZ2VDb250cm9sVW5kZXJUZXN0KCk6IERhdGVSYW5nZUNvbnRyb2wge1xuICAgIHJldHVybiBuZXcgRGF0ZVJhbmdlQ29udHJvbChcbiAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdEYXRlUmFuZ2VDb250cm9sJyxcbiAgICAgICAgICAgIGludGVyYWN0aW9uTW9kZWw6IHtcbiAgICAgICAgICAgICAgICB0YXJnZXRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGY6IFsncGhvdG9zJywgJ2RhdGUnXVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYWN0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICBzZXQ6IFsnc2hvdycsICdzZXQnXSxcbiAgICAgICAgICAgICAgICAgICAgY2hhbmdlOiBbJ2NoYW5nZSddXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2YWxpZGF0aW9uOiB7XG4gICAgICAgICAgICAgICAgcmFuZ2VWYWxpZDogW0RhdGVSYW5nZUNvbnRyb2xWYWxpZGF0aW9ucy5TVEFSVF9CRUZPUkVfRU5EXSxcbiAgICAgICAgICAgICAgICBzdGFydERhdGVWYWxpZDogW0RhdGVDb250cm9sVmFsaWRhdGlvbnMuUEFTVF9EQVRFX09OTFldLFxuICAgICAgICAgICAgICAgIGVuZERhdGVWYWxpZDogW0RhdGVDb250cm9sVmFsaWRhdGlvbnMuUEFTVF9EQVRFX09OTFldXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgfSxcbiAgICApO1xufVxuY2xhc3MgU3RyaWN0RGF0ZVJhbmdlQ29udHJvbE1hbmFnZXIgZXh0ZW5kcyBDb250cm9sTWFuYWdlciB7XG4gICAgY3JlYXRlQ29udHJvbFRyZWUoc3RhdGU6IGFueSk6IENvbnRyb2wge1xuICAgICAgICByZXR1cm4gZGF0ZVJhbmdlQ29udHJvbFVuZGVyVGVzdCgpO1xuICAgIH1cbn1cblxuY29uc3QgYXNrRm9yU3RhcnRQcm9tcHRzID0gWydzdGFydCBkYXRlIHBsZWFzZSA/JywgJ1BsZWFzZSBnaXZlIG1lIHRoZSBzdGFydCBkYXRlLiddO1xuY29uc3QgdmFsdWVTZXRQcm9tcHRzID0gWydPay4nLCAnUm9nZXIuJ107XG5jb25zdCBhc2tGb3JFbmRQcm9tcHRzID0gWydFbmQgZGF0ZSBwbGVhc2UgPycsICdQbGVhc2UgZ2l2ZSBtZSB0aGUgZW5kIGRhdGUuJ107XG5jb25zdCBhc2tGb3JCb3RoUHJvbXB0cyA9IFsnV2hhdCBpcyB0aGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUgeW91IHdhbnQgPycsICdQbGVhc2UgZ2l2ZSBtZSB0aGUgc3RhcnQgZGF0ZSBhbmQgdGhlIGVuZCBkYXRlLiddO1xuY2xhc3MgVmFyaWFibGVSZXNwb25zZVR3b0RhdGVzQ29udHJvbE1hbmFnZXIgZXh0ZW5kcyBDb250cm9sTWFuYWdlciB7XG4gICAgY3JlYXRlQ29udHJvbFRyZWUoc3RhdGU6IGFueSk6IENvbnRyb2wge1xuICAgICAgICByZXR1cm4gbmV3IERhdGVSYW5nZUNvbnRyb2woXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6ICdEYXRlUmFuZ2VDb250cm9sJyxcbiAgICAgICAgICAgICAgICBpbnRlcmFjdGlvbk1vZGVsOiB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGY6IFsncGhvdG9zJywgJ2RhdGUnXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IFsnc2hvdycsICdzZXQnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZTogWydjaGFuZ2UnXVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmFsaWRhdGlvbjoge1xuICAgICAgICAgICAgICAgICAgICByYW5nZVZhbGlkOiBbRGF0ZVJhbmdlQ29udHJvbFZhbGlkYXRpb25zLlNUQVJUX0JFRk9SRV9FTkRdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9tcHRzOiB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0RGF0ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFZhbHVlOiBhc2tGb3JTdGFydFByb21wdHMsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZVNldDogdmFsdWVTZXRQcm9tcHRzXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVuZERhdGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RWYWx1ZTogYXNrRm9yRW5kUHJvbXB0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlU2V0OiB2YWx1ZVNldFByb21wdHNcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdFJhbmdlOiBhc2tGb3JCb3RoUHJvbXB0c1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgfVxufVxuXG5zdWl0ZSgnRGF0ZVJhbmdlQ29udHJvbCcsICgpID0+IHtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAvLyBzZXQgbm93IHRvIDIwMTktMDEtMDNcbiAgICAgICAgc2lub24udXNlRmFrZVRpbWVycyhuZXcgRGF0ZSgnMjAxOS0wMS0wM1QyMTo1NTozOC4xNTFaJykpO1xuICAgIH0pO1xuXG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgICAgc2lub24ucmVzdG9yZSgpO1xuICAgIH0pO1xuXG4gICAgc3VpdGUoJ0UyRSB0ZXN0cycsICgpID0+IHtcbiAgICAgICAgc3VpdGUoJ09ubHkgRGF0ZVJhbmdlQ29udHJvbEludGVudCAmIERhdGVDb250cm9sSW50ZW50JywgKCkgPT4ge1xuICAgICAgICAgICAgdGVzdCgnYm90aCBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZSBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogc2V0IHN0YXJ0IGRhdGUgdG8gMjAxNyBhbmQgZW5kIGRhdGUgdG8gMjAxOCcsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uLmEnOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldC5hJzogJ3N0YXJ0RGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmEnOiAnMjAxNycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbi5iJzogJC5BY3Rpb24uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQuYic6ICdlbmREYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTctMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDE4LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ2JvdGggc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUgcHJvdmlkZWQgYnV0IGluIHNpbXBsZSB3b3JkcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxNyB0byAyMDE4JywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIDIwMTgtMTItMzEuJyxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVzdCgnc2hvdWxkIGFzayBmb3IgZW5kIGRhdGUgd2hlbiBvbmx5IHN0YXJ0IGRhdGUgaXMgc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzZXQgc3RhcnQgZGF0ZSB0byAyMDE3JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdzdGFydERhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTcuIFdoYXQgaXMgdGhlIGVuZCBkYXRlIHlvdSB3YW50PycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUnOiAnMjAxOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgZW5kIGRhdGUgaXMgMjAxOC4nLFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0ZXN0KCdzaG91bGQgYXNrIGZvciBzdGFydCBkYXRlIHdoZW4gZW5kIHN0YXJ0IGRhdGUgaXMgc2V0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzZXQgZW5kIGRhdGUgdG8gMjAxNycsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnZW5kRGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIGVuZCBkYXRlIGlzIDIwMTcuIFdoYXQgaXMgdGhlIHN0YXJ0IGRhdGUgeW91IHdhbnQ/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiAyMDE2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTYuJyxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVzdCgncmF3IHZhbHVlIGlucHV0IHNob3VsZCB1c2UgZm9jdXMgdG8gZGV0ZXJtaW5lIHRhcmdldCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogc2V0IHN0YXJ0IGRhdGUgdG8gMjAxNycsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnc3RhcnREYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUnOiAnMjAxNycsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyAyMDE3LiBXaGF0IGlzIHRoZSBlbmQgZGF0ZSB5b3Ugd2FudD8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IDIwMTgnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIGVuZCBkYXRlIGlzIDIwMTguJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBhY3R1YWxseSAyMDE3JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAnY2hhbmdlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUnOiAnMjAxNycsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgZW5kIGRhdGUgaXMgY2hhbmdlZCB0byAyMDE3LicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ3Nob3VsZCBtZW50aW9uIGJvdGggY2hhbmdlIGlmIHR3byB2YWx1ZSBjaGFuZ2VkIHRvZ2V0aGVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzZXQgc3RhcnQgZGF0ZSB0byAyMDE3JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdzdGFydERhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTcuIFdoYXQgaXMgdGhlIGVuZCBkYXRlIHlvdSB3YW50PycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUnOiAnMjAxOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgZW5kIGRhdGUgaXMgMjAxOC4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IGFjdHVhbGx5IDIwMTUgdG8gMjAxNicsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIGNoYW5nZWQgdG8gMjAxNS0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIGNoYW5nZWQgdG8gMjAxNi0xMi0zMS4nLFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0ZXN0KCdvbmx5IHJhdyB2YWx1ZSBpbnB1dCBzaG91bGQgYmUgcmVnYXJkZWQgYXMgcmFuZ2UgaWYgbm8gcHJldmlvdXMgY29udGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxOCcsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHsgJ0FNQVpPTi5EQVRFJzogJzIwMTgnIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTgtMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDE4LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ1doZW4gdGhlcmUgaXMgbGFzdEluaXRpYXRpdmUgY2hpbGQgYW5kIGZvY3VzIGlzIGFjdHVhbGx5IG9uIHBhcmVudCwgcmF3IHZhbHVlIHNob3VsZCBiZSBjb25zdW1lZCBieSBwYXJlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgU3RyaWN0RGF0ZVJhbmdlQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IHNldCBzdGFydCBkYXRlIHRvIDIwMTcnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLlNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0JzogJ3N0YXJ0RGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy4gV2hhdCBpcyB0aGUgZW5kIGRhdGUgeW91IHdhbnQ/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBBY3R1YWxseSBjaGFuZ2UgZGF0ZSBmcm9tIDIwMTUtMDEtMDEgdG8gMjAxNi0xMi0zMScsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmEnOiAnMjAxNScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmInOiAnMjAxNidcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTUtMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDE2LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogY2hhbmdlIGRhdGUgdG8gMjAxNycsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgY2hhbmdlZCB0byAyMDE3LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgY2hhbmdlZCB0byAyMDE3LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ3doZW4gdGFyZ2V0IGFtYmlndW91cywgYW5kIHR3byB2YWx1ZSBwcm92aWRlZCwgc2hvdWxkIHRyYW5zZmVyIGRhdGUgdG8gc3RhcnREYXRlIGFuZCBlbmREYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzZXQgZGF0ZSBmcm9tIDIwMTcgdG8gMjAxOCcsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmEnOiAnMjAxNycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmInOiAnMjAxOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyAyMDE3LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgMjAxOC0xMi0zMS4nLFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0ZXN0KCd3aGVuIGZvY3VzIGlzIGJvdGgsIG9uZSB2YWx1ZSB3aWxsIGJlIGNvbnNpZGVyZWQgYXMgYm90aCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogc2V0IGRhdGUgZnJvbSAyMDE3IHRvIDIwMTgnLCBUZXN0SW5wdXQub2YoRGF0ZVJhbmdlQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLlNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0JzogJ2RhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIDIwMTgtMTItMzEuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiAyMDE2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE2J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgY2hhbmdlZCB0byAyMDE2LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgY2hhbmdlZCB0byAyMDE2LTEyLTMxLicsXG5cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVzdCgnd2hlbiBmb2N1cyBpcyBib3RoLCBhbWJpZ3VvdXMgdGFyZ2V0IHdpbGwgYmUgY29uc2lkZXJlZCBhcyBib3RoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzZXQgZGF0ZSBmcm9tIDIwMTcgdG8gMjAxOCcsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmEnOiAnMjAxNycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmInOiAnMjAxOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyAyMDE3LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgMjAxOC0xMi0zMS4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IHNldCBkYXRlIHRvIDIwMTYnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLlNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0JzogJ2RhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE2J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgY2hhbmdlZCB0byAyMDE2LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgY2hhbmdlZCB0byAyMDE2LTEyLTMxLicsXG5cbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBzdWl0ZSgnSW50ZWdyYXRlIHdpdGggdHdvIGJ1aWx0aW4gdmFsaWRhdGlvbiBydWxlcycsICgpID0+IHtcbiAgICAgICAgICAgIHRlc3QoJ3Nob3VsZCBhc2sgZm9yIHZhbGlkIGVuZCBkYXRlIHdoZW4gZW5kIGRhdGUgZmFpbHMgdmFsaWRhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgU3RyaWN0RGF0ZVJhbmdlQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IHNldCBkYXRlIGZyb20gMjAxNyB0byAyMDIwJywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDIwJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTctMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDIwLTEyLTMxLiBTb3JyeSBidXQgdGhhdFxcJ3Mgbm90IGEgdmFsaWQgZW5kIGRhdGUgYmVjYXVzZSB0aGUgZGF0ZSBjYW5ub3QgYmUgZ3JlYXRlciB0aGFuIHRvZGF5LiBXaGF0IHNob3VsZCBJIGNoYW5nZSB0aGUgZW5kIGRhdGUgdG8/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiAyMDE4JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBlbmQgZGF0ZSBpcyBjaGFuZ2VkIHRvIDIwMTguJ1xuXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ3Nob3VsZCBhc2sgZm9yIHZhbGlkIHN0YXJ0IGRhdGUgd2hlbiBzdGFydCBkYXRlIGZhaWxzIHZhbGlkYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzZXQgc3RhcnQgZGF0ZSB0byAyMDIwJywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdzdGFydERhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDIwJyxcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IFNvcnJ5IGJ1dCB0aGF0XFwncyBub3QgYSB2YWxpZCBzdGFydCBkYXRlIGJlY2F1c2UgdGhlIGRhdGUgY2Fubm90IGJlIGdyZWF0ZXIgdGhhbiB0b2RheS4gV2hhdCBpcyB0aGUgc3RhcnQgZGF0ZSB5b3Ugd2FudD8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IDIwMTgnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxOC4gV2hhdCBpcyB0aGUgZW5kIGRhdGUgeW91IHdhbnQ/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiAyMDE4JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBlbmQgZGF0ZSBpcyAyMDE4LicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ3Nob3VsZCBhc2sgZm9yIGJvdGggc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUgd2hlbiBib3RoIHZhbHVlIGNoYW5nZWQgYW5kIHN0YXJ0IGRhdGUgaXMgcGFzdCBlbmQgZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogc2V0IGRhdGUgZnJvbSAyMDE3IHRvIDIwMTYnLCBUZXN0SW5wdXQub2YoRGF0ZVJhbmdlQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLlNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0JzogJ2RhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTYnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIDIwMTYtMTItMzEuIFNvcnJ5LCBpbnZhbGlkIHJhbmdlIGJlY2F1c2Ugc3RhcnQgZGF0ZSBjYW4gbm90IGJlIGdyZWF0ZXIgdGhhbiBlbmQgZGF0ZS4gV2hhdCBpcyB0aGUgc3RhcnQgZGF0ZSBhbmQgZW5kIGRhdGUgeW91IHdhbnQ/JyxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVzdCgnc2hvdWxkIGFzayBmb3IgdmFsaWQgZW5kIGRhdGUgd2hlbiBzdGFydCBkYXRlIGlzIHBhc3QgZW5kIGRhdGUsIGFuZCBvbmx5IGVuZCBkYXRlIGlzIGNoYW5nZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgU3RyaWN0RGF0ZVJhbmdlQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IHNldCBkYXRlIGZyb20gMjAxNiB0byAyMDE3JywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTYtMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDE3LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogY2hhbmdlIGVuZCBkYXRlIHRvIDIwMTUnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLkNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0JzogJ2VuZERhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURSc6ICcyMDE1J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIGVuZCBkYXRlIGlzIGNoYW5nZWQgdG8gMjAxNS4gU29ycnksIGludmFsaWQgcmFuZ2UgYmVjYXVzZSBzdGFydCBkYXRlIGNhbiBub3QgYmUgZ3JlYXRlciB0aGFuIGVuZCBkYXRlLiBXaGF0IGlzIHRoZSBlbmQgZGF0ZSB5b3Ugd2FudD8nLFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdWl0ZSgnSW50ZWdyYXRlIHdpdGggU2ltcGxlQ29udHJvbEludGVudCAmIENvbmp1bmN0aW9uQ29udHJvbEludGVudCcsICgpID0+IHtcbiAgICAgICAgICAgIHRlc3QoJ2NoYW5nZSB3aXRoIGFtYmlndW91cyB0YXJnZXQgd2lsbCBhc2sgZm9yIGJvdGggc3RhcnQgYW5kIGVuZCB3aGVuIGZvY3VzIGlzIGJvdGgsIGFuZCB0cmVhdCBvbmUgdmFsdWUgaW5wdXQgYXMgYSByYW5nZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxNyB0byAyMDE4JywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIDIwMTgtMTItMzEuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBDaGFuZ2UgZGF0ZScsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAkLkFjdGlvbi5DaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAnZGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBXaGF0IGlzIHRoZSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZSB5b3Ugd2FudD8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IDIwMTUgdG8gMjAxNicsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE2JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIGNoYW5nZWQgdG8gMjAxNS0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIGNoYW5nZWQgdG8gMjAxNi0xMi0zMS4nLFxuXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ2NoYW5nZSB3aXRoIGFtYmlndW91cyB0YXJnZXQgd2lsbCBvbmx5IGNoYW5nZSBzdGFydCB3aGVuIGZvY3VzIGlzIHN0YXJ0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiAyMDE3IHRvIDIwMTgnLCBUZXN0SW5wdXQub2YoRGF0ZVJhbmdlQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmEnOiAnMjAxNycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFLmInOiAnMjAxOCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyAyMDE3LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgMjAxOC0xMi0zMS4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IENoYW5nZSBzdGFydCBkYXRlIHRvIDIwMTUnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLkNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0JzogJ3N0YXJ0RGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTUnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyBjaGFuZ2VkIHRvIDIwMTUuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBjaGFuZ2UgZGF0ZSB0byAyMDE2JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAkLkFjdGlvbi5DaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUnOiAnMjAxNicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyBjaGFuZ2VkIHRvIDIwMTYuJyxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVzdCgnY2hhbmdlIHN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzZXQgc3RhcnQgZGF0ZSB0byAyMDE3IGFuZCBzZXQgZW5kIGRhdGUgdG8gMjAxOCcsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uLmEnOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbi5iJzogJC5BY3Rpb24uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQuYSc6ICdzdGFydERhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQuYic6ICdlbmREYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTctMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDE4LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogQ2hhbmdlIHN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlJywgVGVzdElucHV0Lm9mKENvbmp1bmN0aW9uQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLkNoYW5nZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0LmEnOiAnc3RhcnREYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0LmInOiAnZW5kRGF0ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBXaGF0IGlzIHRoZSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZSB5b3Ugd2FudD8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IDIwMTUgdG8gMjAxNicsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE2J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgY2hhbmdlZCB0byAyMDE1LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgY2hhbmdlZCB0byAyMDE2LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ2NoYW5nZSB3aXRoIHNwZWNpZmljIHRhcmdldCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxNyB0byAyMDE4JywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIDIwMTgtMTItMzEuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBDaGFuZ2Ugc3RhcnQgZGF0ZScsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAkLkFjdGlvbi5DaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAnc3RhcnREYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBXaGF0IHNob3VsZCBJIGNoYW5nZSB0aGUgc3RhcnQgZGF0ZSB0bz8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IDIwMTUnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgY2hhbmdlZCB0byAyMDE1LicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRlc3QoJ3doZW4gZm9jdXMgaXMgYm90aCwgYWN0aW9uIFwiY2hhbmdlXCIgd2lsbCBiZSBjb25zaWRlcmVkIHRvIGNoYW5nZSBib3RoIHN0YXJ0IGFuZCBlbmQgZGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVyID0gbmV3IENvbnRyb2xIYW5kbGVyKG5ldyBTdHJpY3REYXRlUmFuZ2VDb250cm9sTWFuYWdlcigpKTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0RTJFKFxuICAgICAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgICAgICBbXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogc2V0IGRhdGUgZnJvbSAyMDE3IHRvIDIwMTgnLCBUZXN0SW5wdXQub2YoRGF0ZVJhbmdlQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2FjdGlvbic6ICQuQWN0aW9uLlNldCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGFyZ2V0JzogJ2RhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIDIwMTgtMTItMzEuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBjaGFuZ2UnLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJC5BY3Rpb24uQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IFdoYXQgaXMgdGhlIHN0YXJ0IGRhdGUgYW5kIGVuZCBkYXRlIHlvdSB3YW50PycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxNSB0byAyMDE2JywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTYnXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyBjaGFuZ2VkIHRvIDIwMTUtMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyBjaGFuZ2VkIHRvIDIwMTYtMTItMzEuJyxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVzdCgnd2hlbiBmb2N1cyBpcyBzdGFydCBkYXRlLCBhY3Rpb24gXCJjaGFuZ2VcIiB3aWxsIGJlIGNvbnNpZGVyZWQgdG8gY2hhbmdlIHN0YXJ0IGRhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgU3RyaWN0RGF0ZVJhbmdlQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IHNldCBkYXRlIGZyb20gMjAxNyB0byAyMDE4JywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTctMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDE4LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogY2hhbmdlIHN0YXJ0IGRhdGUgdG8gMjAxNicsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnc3RhcnREYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUnOiAnMjAxNicsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyBjaGFuZ2VkIHRvIDIwMTYuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBjaGFuZ2UnLCBUZXN0SW5wdXQub2YoR2VuZXJhbENvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJC5BY3Rpb24uQ2hhbmdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IFdoYXQgc2hvdWxkIEkgY2hhbmdlIHRoZSBzdGFydCBkYXRlIHRvPycsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogMjAxNScsIFRlc3RJbnB1dC5vZihTaW5nbGVWYWx1ZUNvbnRyb2xJbnRlbnQub2YoQW1hem9uQnVpbHRJblNsb3RUeXBlLkRBVEUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUnOiAnMjAxNScsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICAgICAnQTogR290IGl0LiBUaGUgc3RhcnQgZGF0ZSBpcyBjaGFuZ2VkIHRvIDIwMTUuJyxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBzdWl0ZSgnSW50ZWdyYXRlIHdpdGggY3VzdG9taXplZCBhY3Rpb24gJiB0YXJnZXQnLCAoKSA9PiB7XG4gICAgICAgICAgICB0ZXN0KCdEYXRlUmFuZ2VDb250cm9sIHNob3VsZCB1bmRlcnN0YW5kIGN1c3RvbWl6ZWQgdGFyZ2V0IHBob3RvcyBhbmQgYWN0aW9uIHNob3cnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgaGFuZGxlciA9IG5ldyBDb250cm9sSGFuZGxlcihuZXcgU3RyaWN0RGF0ZVJhbmdlQ29udHJvbE1hbmFnZXIoKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlcixcbiAgICAgICAgICAgICAgICAgICAgW1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IHNob3cgcGhvdG9zIGZyb20gMjAxNyB0byAyMDE4JywgVGVzdElucHV0Lm9mKERhdGVSYW5nZUNvbnRyb2xJbnRlbnQub2Yoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdhY3Rpb24nOiAnc2hvdycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdwaG90b3MnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5hJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBTUFaT04uREFURS5iJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgMjAxNy0wMS0wMSBhbmQgdGhlIGVuZCBkYXRlIGlzIDIwMTgtMTItMzEuJyxcbiAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGVzdCgnR2VuZXJhbENvbnRyb2xJbnRlbnQgJiBDb25qdW5jdGlvbkNvbnRyb2xJbnRlbnQgc2hvdWxkIHVuZGVyc3RhbmQgY3VzdG9taXplZCB0YXJnZXQgcGhvdG9zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFN0cmljdERhdGVSYW5nZUNvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RFMkUoXG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZXIsXG4gICAgICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICdVOiBzaG93IHBob3RvcyBmcm9tIDIwMTcgdG8gMjAxOCcsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJ3Nob3cnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0YXJnZXQnOiAncGhvdG9zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE3JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE4JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBHb3QgaXQuIFRoZSBzdGFydCBkYXRlIGlzIDIwMTctMDEtMDEgYW5kIHRoZSBlbmQgZGF0ZSBpcyAyMDE4LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgICAgICAnVTogY2hhbmdlIHBob3RvcycsIFRlc3RJbnB1dC5vZihHZW5lcmFsQ29udHJvbEludGVudC5vZih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAkLkFjdGlvbi5DaGFuZ2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAncGhvdG9zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdBOiBXaGF0IGlzIHRoZSBzdGFydCBkYXRlIGFuZCBlbmQgZGF0ZSB5b3Ugd2FudD8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ1U6IDIwMTUgdG8gMjAxNicsIFRlc3RJbnB1dC5vZihEYXRlUmFuZ2VDb250cm9sSW50ZW50Lm9mKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYSc6ICcyMDE1JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQU1BWk9OLkRBVEUuYic6ICcyMDE2J1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0E6IEdvdCBpdC4gVGhlIHN0YXJ0IGRhdGUgaXMgY2hhbmdlZCB0byAyMDE1LTAxLTAxIGFuZCB0aGUgZW5kIGRhdGUgaXMgY2hhbmdlZCB0byAyMDE2LTEyLTMxLicsXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgc3VpdGUoJ1ZhcmlhYmxlIHJlc3BvbnNlIHRlc3RzJywgKCkgPT4ge1xuICAgICAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIEZvcmNlIHRvIHJldHVybiB0aGUgbGFzdCBvbmUgaW4gdGhlIGFycmF5XG4gICAgICAgICAgICBzaW5vbi5zdHViKEFycmF5VXRpbCwgJ3JhbmRvbWx5UGljaycpLmNhbGxzRmFrZSgoaW5wdXQpID0+IGlucHV0W2lucHV0Lmxlbmd0aCAtIDFdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBzaW5vbi5yZXN0b3JlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0ZXN0KCdzaG91bGQgYXNrIGZvciBlbmQgZGF0ZSB3aGVuIG9ubHkgc3RhcnQgZGF0ZSBpcyBzZXQsICcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZXIgPSBuZXcgQ29udHJvbEhhbmRsZXIobmV3IFZhcmlhYmxlUmVzcG9uc2VUd29EYXRlc0NvbnRyb2xNYW5hZ2VyKCkpO1xuICAgICAgICAgICAgYXdhaXQgdGVzdEUyRShcbiAgICAgICAgICAgICAgICBoYW5kbGVyLFxuICAgICAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICAgICAgJ1U6IHNldCBzdGFydCBkYXRlIHRvIDIwMTcnLCBUZXN0SW5wdXQub2YoU2luZ2xlVmFsdWVDb250cm9sSW50ZW50Lm9mKEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnYWN0aW9uJzogJC5BY3Rpb24uU2V0LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3RhcmdldCc6ICdzdGFydERhdGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTcnLFxuICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICdBOiBSb2dlci4gUGxlYXNlIGdpdmUgbWUgdGhlIGVuZCBkYXRlLicsXG4gICAgICAgICAgICAgICAgICAgICdVOiAyMDE4JywgVGVzdElucHV0Lm9mKFNpbmdsZVZhbHVlQ29udHJvbEludGVudC5vZihBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ0FNQVpPTi5EQVRFJzogJzIwMTgnLFxuICAgICAgICAgICAgICAgICAgICB9KSksXG4gICAgICAgICAgICAgICAgICAgICdBOiBSb2dlci4nXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBzdWl0ZSgnRGF0ZVJhbmdlQ29udHJvbCBzY2VuYXJpb3MnLCAoKSA9PiB7XG4gICAgICAgIHRlc3QoJ3Vua25vd24gc2luZ2xlIHRhcmdldCBzaG91bGQgYmUgcmVqZWN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250cm9sID0gZGF0ZVJhbmdlQ29udHJvbFVuZGVyVGVzdCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBUZXN0SW5wdXQub2YoRGF0ZVJhbmdlQ29udHJvbEludGVudC5vZih7ICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsICd0YXJnZXQnOiAnZm9vZCcsICdBTUFaT04uREFURS5hJzogJzIwMTYnLCAnQU1BWk9OLkRBVEUuYic6ICcyMDE3J30pKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbkhhbmRsZVJlc3VsdCA9IGF3YWl0IGNvbnRyb2wuY2FuSGFuZGxlKGlucHV0KTtcbiAgICAgICAgICAgIGV4cGVjdChjYW5IYW5kbGVSZXN1bHQpLmZhbHNlO1xuICAgICAgICB9KTtcblxuICAgICAgICB0ZXN0KCd0d28gdGFyZ2V0cyB3aXRoIGVpdGhlciBvbmUgdW5rbm93biBzaG91bGQgYmUgcmVqZWN0ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb250cm9sID0gZGF0ZVJhbmdlQ29udHJvbFVuZGVyVGVzdCgpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXQgPSBUZXN0SW5wdXQub2YoRGF0ZVJhbmdlQ29udHJvbEludGVudC5vZih7ICdhY3Rpb24nOiAkLkFjdGlvbi5TZXQsICd0YXJnZXQuYSc6ICdzdGFydERhdGUnLCAndGFyZ2V0LmInOiAnZm9vZCcsICdBTUFaT04uREFURS5hJzogJzIwMTYnLCAnQU1BWk9OLkRBVEUuYic6ICcyMDE3J30pKTtcbiAgICAgICAgICAgIGNvbnN0IGNhbkhhbmRsZVJlc3VsdCA9IGF3YWl0IGNvbnRyb2wuY2FuSGFuZGxlKGlucHV0KTtcbiAgICAgICAgICAgIGV4cGVjdChjYW5IYW5kbGVSZXN1bHQpLmZhbHNlO1xuICAgICAgICB9KTtcblxuICAgIH0pO1xufSk7XG4iXX0=