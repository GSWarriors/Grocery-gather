"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DateRangeControlIntent = exports.validateControlInput = exports.hasOneOrMoreValues = exports.hasOneOrMoreActions = exports.hasOneOrMoreTargets = exports.unpackDateRangeControlIntent = void 0;
const ModelTypes_1 = require("../interactionModelGeneration/ModelTypes");
const IntentUtils_1 = require("../utils/IntentUtils");
const AmazonBuiltInSlotType_1 = require("./AmazonBuiltInSlotType");
const BaseControlIntent_1 = require("./BaseControlIntent");
function unpackDateRangeControlIntent(intent) {
    if (!intent.name.startsWith('DateRangeControlIntent')) {
        throw new Error(`Not an DateRangeControlIntent: ${intent.name}`);
    }
    let feedback;
    let action;
    let target;
    let amazonDate;
    let actionA;
    let targetA;
    let amazonDateA;
    let actionB;
    let targetB;
    let amazonDateB;
    for (const [name, slot] of Object.entries(intent.slots)) {
        const slotObject = IntentUtils_1.getSlotResolutions(slot);
        const slotValue = slotObject ? slotObject.slotValue : undefined;
        switch (name) {
            case 'feedback':
                feedback = slotValue;
                break;
            case 'action':
                action = slotValue;
                break;
            case 'target':
                target = slotValue;
                break;
            case 'AMAZON.DATE': {
                amazonDate = slotValue;
                break;
            }
            case 'action.a':
                actionA = slotValue;
                break;
            case 'target.a':
                targetA = slotValue;
                break;
            case 'AMAZON.DATE.a': {
                amazonDateA = slotValue;
                break;
            }
            case 'action.b':
                actionB = slotValue;
                break;
            case 'target.b':
                targetB = slotValue;
                break;
            case 'AMAZON.DATE.b': {
                amazonDateB = slotValue;
                break;
            }
            case 'head': break;
            case 'tail': break;
            case 'conjunction': break;
            case 'preposition.a': break;
            case 'preposition.b': break;
            default: break;
        }
    }
    return {
        feedback,
        action,
        target,
        'AMAZON.DATE': amazonDate,
        'action.a': actionA,
        'target.a': targetA,
        'AMAZON.DATE.a': amazonDateA,
        'action.b': actionB,
        'target.b': targetB,
        'AMAZON.DATE.b': amazonDateB
    };
}
exports.unpackDateRangeControlIntent = unpackDateRangeControlIntent;
function hasOneOrMoreTargets(input) {
    if (!input) {
        return false;
    }
    if (input.target !== undefined || (input['target.a'] !== undefined && input['target.b'] !== undefined)) {
        return true;
    }
    return false;
}
exports.hasOneOrMoreTargets = hasOneOrMoreTargets;
function hasOneOrMoreActions(input) {
    if (!input) {
        return false;
    }
    if (input['action.a'] !== undefined || input['action.b'] !== undefined || input.action !== undefined) {
        return true;
    }
    return false;
}
exports.hasOneOrMoreActions = hasOneOrMoreActions;
function hasOneOrMoreValues(input) {
    if (!input) {
        return false;
    }
    if (input['AMAZON.DATE.a'] !== undefined || input['AMAZON.DATE.b'] !== undefined || input['AMAZON.DATE'] !== undefined) {
        return true;
    }
    return false;
}
exports.hasOneOrMoreValues = hasOneOrMoreValues;
function validateControlInput(input) {
    if (!input) {
        return false;
    }
    // priorityRule, when action / target / Amazon.Date exist, no actionA, actionB, no targetA, targetB, no Amazon.Date.a, Amazon.Date.b
    if (input.action !== undefined) {
        if (input["action.a"] !== undefined || input["action.b"] !== undefined) {
            return false;
        }
    }
    if (input.target !== undefined) {
        if (input['target.a'] !== undefined || input['target.b'] !== undefined) {
            return false;
        }
    }
    if (input['AMAZON.DATE'] !== undefined) {
        if (input['AMAZON.DATE.a'] !== undefined || input['AMAZON.DATE.b'] !== undefined) {
            return false;
        }
        if (!(input['target.a'] !== undefined && input['target.b'] !== undefined)) {
            return false;
        }
    }
    // pairRule, if .a exist, then .b must exist. Vice versa
    if ((input['action.a'] !== undefined && input['action.b'] === undefined) || (input['action.b'] !== undefined && input['action.a'] === undefined)) {
        return false;
    }
    if ((input['target.a'] !== undefined && input['target.b'] === undefined) || (input['target.b'] !== undefined && input['target.a'] === undefined)) {
        return false;
    }
    if ((input['AMAZON.DATE.a'] !== undefined && input['AMAZON.DATE.b'] === undefined) || (input['AMAZON.DATE.b'] !== undefined && input['AMAZON.DATE.a'] === undefined)) {
        return false;
    }
    // For DateRangeControlIntent, value must exist
    if (input['AMAZON.DATE'] === undefined && input['AMAZON.DATE.a'] === undefined) {
        return false;
    }
    return true;
}
exports.validateControlInput = validateControlInput;
class DateRangeControlIntent extends BaseControlIntent_1.BaseControlIntent {
    static of(slots) {
        return IntentUtils_1.IntentBuilder.of(this.prototype.constructor.name, slots);
    }
    generateIntent() {
        return {
            name: this.name,
            slots: this.generateSlots(),
            samples: [],
        };
    }
    generateSlots() {
        const slots = [
            {
                name: 'feedback',
                type: ModelTypes_1.SharedSlotType.FEEDBACK
            },
            {
                name: 'action',
                type: ModelTypes_1.SharedSlotType.ACTION
            },
            {
                name: 'target',
                type: ModelTypes_1.SharedSlotType.TARGET
            },
            {
                name: 'preposition.a',
                type: ModelTypes_1.SharedSlotType.PREPOSITION
            },
            {
                name: 'preposition.b',
                type: ModelTypes_1.SharedSlotType.PREPOSITION
            },
            {
                name: 'conjunction',
                type: ModelTypes_1.SharedSlotType.CONJUNCTION
            },
            {
                name: 'target.a',
                type: ModelTypes_1.SharedSlotType.TARGET
            },
            {
                name: 'AMAZON.DATE.a',
                type: AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.DATE
            },
            {
                name: 'target.b',
                type: ModelTypes_1.SharedSlotType.TARGET
            },
            {
                name: 'AMAZON.DATE.b',
                type: AmazonBuiltInSlotType_1.AmazonBuiltInSlotType.DATE
            },
            {
                name: 'head',
                type: ModelTypes_1.SharedSlotType.HEAD
            },
            {
                name: 'tail',
                type: ModelTypes_1.SharedSlotType.TAIL
            }
        ];
        return slots;
    }
    generateSlotTypes() {
        return [
            {
                name: 'target', values: [
                    { id: 'date', name: { value: 'date', synonyms: ['date'] } },
                    { id: 'startDate', name: { value: 'start date', synonyms: ['start date'] } },
                    { id: 'endDate', name: { value: 'end date', synonyms: ['end date'] } }
                ]
            },
            {
                name: 'action', values: [
                    { id: 'set', name: { value: 'set', synonyms: ['set'] } },
                    { id: 'change', name: { value: 'change', synonyms: ['change'] } }
                ]
            }
        ];
    }
}
exports.DateRangeControlIntent = DateRangeControlIntent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGF0ZVJhbmdlQ29udHJvbEludGVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9pbnRlbnRzL0RhdGVSYW5nZUNvbnRyb2xJbnRlbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBY0EseUVBQTBFO0FBQzFFLHNEQUF5RTtBQUN6RSxtRUFBZ0U7QUFDaEUsMkRBQXdEO0FBZ0J4RCxTQUFnQiw0QkFBNEIsQ0FBQyxNQUFjO0lBQ3ZELElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFO1FBQ25ELE1BQU0sSUFBSSxLQUFLLENBQUMsa0NBQWtDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0tBQ3BFO0lBRUQsSUFBSSxRQUE0QixDQUFDO0lBQ2pDLElBQUksTUFBMEIsQ0FBQztJQUMvQixJQUFJLE1BQTBCLENBQUM7SUFDL0IsSUFBSSxVQUE4QixDQUFDO0lBQ25DLElBQUksT0FBMkIsQ0FBQztJQUNoQyxJQUFJLE9BQTJCLENBQUM7SUFDaEMsSUFBSSxXQUErQixDQUFDO0lBQ3BDLElBQUksT0FBMkIsQ0FBQztJQUNoQyxJQUFJLE9BQTJCLENBQUM7SUFDaEMsSUFBSSxXQUErQixDQUFDO0lBQ3BDLEtBQUssTUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxLQUFNLENBQUMsRUFBRTtRQUN0RCxNQUFNLFVBQVUsR0FBRyxnQ0FBa0IsQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QyxNQUFNLFNBQVMsR0FBRyxVQUFVLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQztRQUVoRSxRQUFRLElBQUksRUFBRTtZQUNWLEtBQUssVUFBVTtnQkFBRSxRQUFRLEdBQUcsU0FBUyxDQUFDO2dCQUFDLE1BQU07WUFDN0MsS0FBSyxRQUFRO2dCQUFFLE1B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LEtBQUssRUFBRSxZQUFZLEVBQUUsUUFBUSxFQUFFLENBQUMsWUFBWSxDQUFDLEVBQUUsRUFBRTtvQkFDNUUsRUFBRSxFQUFFLEVBQUUsU0FBUyxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsUUFBUSxFQUFFLENBQUMsVUFBVSxDQUFDLEVBQUUsRUFBRTtpQkFBQzthQUM5RTtZQUNEO2dCQUNJLElBQUksRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO29CQUNwQixFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxRQUFRLEVBQUUsQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFO29CQUN4RCxFQUFFLEVBQUUsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLEVBQUUsS0FBSyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsRUFBRSxFQUFFO2lCQUNwRTthQUNKO1NBRUosQ0FBQztJQUNOLENBQUM7Q0FDSjtBQXRGRCx3REFzRkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQ29weXJpZ2h0IDIwMTkgQW1hem9uLmNvbSwgSW5jLiBvciBpdHMgYWZmaWxpYXRlcy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIikuXG4gKiBZb3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBBIGNvcHkgb2YgdGhlIExpY2Vuc2UgaXMgbG9jYXRlZCBhdFxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBvciBpbiB0aGUgXCJsaWNlbnNlXCIgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMgZGlzdHJpYnV0ZWRcbiAqIG9uIGFuIFwiQVMgSVNcIiBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlclxuICogZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmdcbiAqIHBlcm1pc3Npb25zIGFuZCBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuaW1wb3J0IHsgSW50ZW50IH0gZnJvbSBcImFzay1zZGstbW9kZWxcIjtcbmltcG9ydCB7IHYxIH0gZnJvbSAnYXNrLXNtYXBpLW1vZGVsJztcbmltcG9ydCB7IFNoYXJlZFNsb3RUeXBlIH0gZnJvbSAnLi4vaW50ZXJhY3Rpb25Nb2RlbEdlbmVyYXRpb24vTW9kZWxUeXBlcyc7XG5pbXBvcnQgeyBnZXRTbG90UmVzb2x1dGlvbnMsIEludGVudEJ1aWxkZXIgfSBmcm9tICcuLi91dGlscy9JbnRlbnRVdGlscyc7XG5pbXBvcnQgeyBBbWF6b25CdWlsdEluU2xvdFR5cGUgfSBmcm9tICcuL0FtYXpvbkJ1aWx0SW5TbG90VHlwZSc7XG5pbXBvcnQgeyBCYXNlQ29udHJvbEludGVudCB9IGZyb20gJy4vQmFzZUNvbnRyb2xJbnRlbnQnO1xuaW1wb3J0IFNsb3RUeXBlID0gdjEuc2tpbGwuaW50ZXJhY3Rpb25Nb2RlbC5TbG90VHlwZTtcblxuZXhwb3J0IGludGVyZmFjZSBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMge1xuICAgIGZlZWRiYWNrPzogc3RyaW5nLFxuICAgIGFjdGlvbj86IHN0cmluZyxcbiAgICB0YXJnZXQ/OiBzdHJpbmcsXG4gICAgJ0FNQVpPTi5EQVRFJz86IHN0cmluZyxcbiAgICAnYWN0aW9uLmEnPzogc3RyaW5nLFxuICAgICd0YXJnZXQuYSc/OiBzdHJpbmcsXG4gICAgJ0FNQVpPTi5EQVRFLmEnPzogc3RyaW5nLFxuICAgICdhY3Rpb24uYic/OiBzdHJpbmcsXG4gICAgJ3RhcmdldC5iJz86IHN0cmluZyxcbiAgICAnQU1BWk9OLkRBVEUuYic/OiBzdHJpbmdcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVucGFja0RhdGVSYW5nZUNvbnRyb2xJbnRlbnQoaW50ZW50OiBJbnRlbnQpOiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMge1xuICAgIGlmICghaW50ZW50Lm5hbWUuc3RhcnRzV2l0aCgnRGF0ZVJhbmdlQ29udHJvbEludGVudCcpKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTm90IGFuIERhdGVSYW5nZUNvbnRyb2xJbnRlbnQ6ICR7aW50ZW50Lm5hbWV9YCk7XG4gICAgfVxuXG4gICAgbGV0IGZlZWRiYWNrOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGFjdGlvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCB0YXJnZXQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgYW1hem9uRGF0ZTogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCBhY3Rpb25BOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IHRhcmdldEE6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgYW1hem9uRGF0ZUE6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBsZXQgYWN0aW9uQjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCB0YXJnZXRCOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgbGV0IGFtYXpvbkRhdGVCOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gICAgZm9yIChjb25zdCBbbmFtZSwgc2xvdF0gb2YgT2JqZWN0LmVudHJpZXMoaW50ZW50LnNsb3RzISkpIHtcbiAgICAgICAgY29uc3Qgc2xvdE9iamVjdCA9IGdldFNsb3RSZXNvbHV0aW9ucyhzbG90KTtcbiAgICAgICAgY29uc3Qgc2xvdFZhbHVlID0gc2xvdE9iamVjdCA/IHNsb3RPYmplY3Quc2xvdFZhbHVlIDogdW5kZWZpbmVkO1xuXG4gICAgICAgIHN3aXRjaCAobmFtZSkge1xuICAgICAgICAgICAgY2FzZSAnZmVlZGJhY2snOiBmZWVkYmFjayA9IHNsb3RWYWx1ZTsgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdhY3Rpb24nOiBhY3Rpb24gPSBzbG90VmFsdWU7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFyZ2V0JzogdGFyZ2V0ID0gc2xvdFZhbHVlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FNQVpPTi5EQVRFJzoge1xuICAgICAgICAgICAgICAgIGFtYXpvbkRhdGUgPSBzbG90VmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdhY3Rpb24uYSc6IGFjdGlvbkEgPSBzbG90VmFsdWU7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFyZ2V0LmEnOiB0YXJnZXRBID0gc2xvdFZhbHVlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FNQVpPTi5EQVRFLmEnOiB7XG4gICAgICAgICAgICAgICAgYW1hem9uRGF0ZUEgPSBzbG90VmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdhY3Rpb24uYic6IGFjdGlvbkIgPSBzbG90VmFsdWU7IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAndGFyZ2V0LmInOiB0YXJnZXRCID0gc2xvdFZhbHVlOyBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0FNQVpPTi5EQVRFLmInOiB7XG4gICAgICAgICAgICAgICAgYW1hem9uRGF0ZUIgPSBzbG90VmFsdWU7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlICdoZWFkJzogYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0YWlsJzogYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjb25qdW5jdGlvbic6IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncHJlcG9zaXRpb24uYSc6IGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAncHJlcG9zaXRpb24uYic6IGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDogYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBmZWVkYmFjayxcbiAgICAgICAgYWN0aW9uLFxuICAgICAgICB0YXJnZXQsXG4gICAgICAgICdBTUFaT04uREFURSc6IGFtYXpvbkRhdGUsXG4gICAgICAgICdhY3Rpb24uYSc6IGFjdGlvbkEsXG4gICAgICAgICd0YXJnZXQuYSc6IHRhcmdldEEsXG4gICAgICAgICdBTUFaT04uREFURS5hJzogYW1hem9uRGF0ZUEsXG4gICAgICAgICdhY3Rpb24uYic6IGFjdGlvbkIsXG4gICAgICAgICd0YXJnZXQuYic6IHRhcmdldEIsXG4gICAgICAgICdBTUFaT04uREFURS5iJzogYW1hem9uRGF0ZUJcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT25lT3JNb3JlVGFyZ2V0cyhpbnB1dDogRGF0ZVJhbmdlQ29udHJvbEludGVudFNsb3RzIHwgbnVsbCk6IGJvb2xlYW4ge1xuICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoaW5wdXQudGFyZ2V0ICE9PSB1bmRlZmluZWQgfHwgKGlucHV0Wyd0YXJnZXQuYSddICE9PSB1bmRlZmluZWQgJiYgaW5wdXRbJ3RhcmdldC5iJ10gIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc09uZU9yTW9yZUFjdGlvbnMoaW5wdXQ6IERhdGVSYW5nZUNvbnRyb2xJbnRlbnRTbG90cyB8IG51bGwpOiBib29sZWFuIHtcbiAgICBpZiAoIWlucHV0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlucHV0WydhY3Rpb24uYSddICE9PSB1bmRlZmluZWQgfHwgaW5wdXRbJ2FjdGlvbi5iJ10gIT09IHVuZGVmaW5lZCB8fCBpbnB1dC5hY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzT25lT3JNb3JlVmFsdWVzKGlucHV0OiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgaWYgKCFpbnB1dCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChpbnB1dFsnQU1BWk9OLkRBVEUuYSddICE9PSB1bmRlZmluZWQgfHwgaW5wdXRbJ0FNQVpPTi5EQVRFLmInXSAhPT0gdW5kZWZpbmVkIHx8IGlucHV0WydBTUFaT04uREFURSddICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ29udHJvbElucHV0KGlucHV0OiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMgfCBudWxsKTogYm9vbGVhbiB7XG4gICAgaWYgKCFpbnB1dCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIHByaW9yaXR5UnVsZSwgd2hlbiBhY3Rpb24gLyB0YXJnZXQgLyBBbWF6b24uRGF0ZSBleGlzdCwgbm8gYWN0aW9uQSwgYWN0aW9uQiwgbm8gdGFyZ2V0QSwgdGFyZ2V0Qiwgbm8gQW1hem9uLkRhdGUuYSwgQW1hem9uLkRhdGUuYlxuICAgIGlmIChpbnB1dC5hY3Rpb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaW5wdXRbXCJhY3Rpb24uYVwiXSAhPT0gdW5kZWZpbmVkIHx8IGlucHV0W1wiYWN0aW9uLmJcIl0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpbnB1dC50YXJnZXQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaW5wdXRbJ3RhcmdldC5hJ10gIT09IHVuZGVmaW5lZCB8fCBpbnB1dFsndGFyZ2V0LmInXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaW5wdXRbJ0FNQVpPTi5EQVRFJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAoaW5wdXRbJ0FNQVpPTi5EQVRFLmEnXSAhPT0gdW5kZWZpbmVkIHx8IGlucHV0WydBTUFaT04uREFURS5iJ10gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghKGlucHV0Wyd0YXJnZXQuYSddICE9PSB1bmRlZmluZWQgJiYgaW5wdXRbJ3RhcmdldC5iJ10gIT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHBhaXJSdWxlLCBpZiAuYSBleGlzdCwgdGhlbiAuYiBtdXN0IGV4aXN0LiBWaWNlIHZlcnNhXG4gICAgaWYgKChpbnB1dFsnYWN0aW9uLmEnXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0WydhY3Rpb24uYiddID09PSB1bmRlZmluZWQpIHx8IChpbnB1dFsnYWN0aW9uLmInXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0WydhY3Rpb24uYSddID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKChpbnB1dFsndGFyZ2V0LmEnXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0Wyd0YXJnZXQuYiddID09PSB1bmRlZmluZWQpIHx8IChpbnB1dFsndGFyZ2V0LmInXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0Wyd0YXJnZXQuYSddID09PSB1bmRlZmluZWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKChpbnB1dFsnQU1BWk9OLkRBVEUuYSddICE9PSB1bmRlZmluZWQgJiYgaW5wdXRbJ0FNQVpPTi5EQVRFLmInXSA9PT0gdW5kZWZpbmVkKSB8fCAoaW5wdXRbJ0FNQVpPTi5EQVRFLmInXSAhPT0gdW5kZWZpbmVkICYmIGlucHV0WydBTUFaT04uREFURS5hJ10gPT09IHVuZGVmaW5lZCkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEZvciBEYXRlUmFuZ2VDb250cm9sSW50ZW50LCB2YWx1ZSBtdXN0IGV4aXN0XG4gICAgaWYgKGlucHV0WydBTUFaT04uREFURSddID09PSB1bmRlZmluZWQgJiYgaW5wdXRbJ0FNQVpPTi5EQVRFLmEnXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBjbGFzcyBEYXRlUmFuZ2VDb250cm9sSW50ZW50IGV4dGVuZHMgQmFzZUNvbnRyb2xJbnRlbnQge1xuXG4gICAgc3RhdGljIG9mKHNsb3RzOiBEYXRlUmFuZ2VDb250cm9sSW50ZW50U2xvdHMpOiBJbnRlbnQge1xuICAgICAgICByZXR1cm4gSW50ZW50QnVpbGRlci5vZih0aGlzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvci5uYW1lLCBzbG90cyk7XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVJbnRlbnQoKTogdjEuc2tpbGwuaW50ZXJhY3Rpb25Nb2RlbC5JbnRlbnQge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgc2xvdHM6IHRoaXMuZ2VuZXJhdGVTbG90cygpLFxuICAgICAgICAgICAgc2FtcGxlczogW10sXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgZ2VuZXJhdGVTbG90cygpOiB2MS5za2lsbC5pbnRlcmFjdGlvbk1vZGVsLlNsb3REZWZpbml0aW9uW10ge1xuICAgICAgICBjb25zdCBzbG90czogdjEuc2tpbGwuaW50ZXJhY3Rpb25Nb2RlbC5TbG90RGVmaW5pdGlvbltdID0gW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdmZWVkYmFjaycsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuRkVFREJBQ0tcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ2FjdGlvbicsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuQUNUSU9OXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0YXJnZXQnLFxuICAgICAgICAgICAgICAgIHR5cGU6IFNoYXJlZFNsb3RUeXBlLlRBUkdFVFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAncHJlcG9zaXRpb24uYScsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuUFJFUE9TSVRJT05cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ3ByZXBvc2l0aW9uLmInLFxuICAgICAgICAgICAgICAgIHR5cGU6IFNoYXJlZFNsb3RUeXBlLlBSRVBPU0lUSU9OXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdjb25qdW5jdGlvbicsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuQ09OSlVOQ1RJT05cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ3RhcmdldC5hJyxcbiAgICAgICAgICAgICAgICB0eXBlOiBTaGFyZWRTbG90VHlwZS5UQVJHRVRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbmFtZTogJ0FNQVpPTi5EQVRFLmEnLFxuICAgICAgICAgICAgICAgIHR5cGU6IEFtYXpvbkJ1aWx0SW5TbG90VHlwZS5EQVRFXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICd0YXJnZXQuYicsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuVEFSR0VUXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdBTUFaT04uREFURS5iJyxcbiAgICAgICAgICAgICAgICB0eXBlOiBBbWF6b25CdWlsdEluU2xvdFR5cGUuREFURVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnaGVhZCcsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuSEVBRFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAndGFpbCcsXG4gICAgICAgICAgICAgICAgdHlwZTogU2hhcmVkU2xvdFR5cGUuVEFJTFxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuXG4gICAgICAgIHJldHVybiBzbG90cztcbiAgICB9XG5cbiAgICBnZW5lcmF0ZVNsb3RUeXBlcygpOiBTbG90VHlwZVtdIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAndGFyZ2V0JywgdmFsdWVzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdkYXRlJywgbmFtZTogeyB2YWx1ZTogJ2RhdGUnLCBzeW5vbnltczogWydkYXRlJ10gfSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGlkOiAnc3RhcnREYXRlJywgbmFtZTogeyB2YWx1ZTogJ3N0YXJ0IGRhdGUnLCBzeW5vbnltczogWydzdGFydCBkYXRlJ10gfSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGlkOiAnZW5kRGF0ZScsIG5hbWU6IHsgdmFsdWU6ICdlbmQgZGF0ZScsIHN5bm9ueW1zOiBbJ2VuZCBkYXRlJ10gfSB9XVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBuYW1lOiAnYWN0aW9uJywgdmFsdWVzOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgaWQ6ICdzZXQnLCBuYW1lOiB7IHZhbHVlOiAnc2V0Jywgc3lub255bXM6IFsnc2V0J10gfSB9LFxuICAgICAgICAgICAgICAgICAgICB7IGlkOiAnY2hhbmdlJywgbmFtZTogeyB2YWx1ZTogJ2NoYW5nZScsIHN5bm9ueW1zOiBbJ2NoYW5nZSddIH0gfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH1cblxuICAgICAgICBdO1xuICAgIH1cbn1cbiJdfQ==